// ==UserScript==
// @name         Octadesk to Hubspot
// @author       Caio Rodrigo
// @version      v3.4
// @run-at       document-end
// @run-at       document-idle
// @grant        GM_addStyle
// @grant        GM_xmlhttpRequest
// @namespace    https://app.octadesk.com/
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @updateURL    https://github.com/investbank/octadesk/main/section.user.js
// @downloadURL  https://raw.githubusercontent.com/investbank/octadesk/main/section.user.js
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// ==/UserScript==

function a0_0x19a2(){const _0x37e54b=['error','href','36711165','https://app.hubspot.com/contacts/5867570/record/0-3/','121318700','10806285XjznOY','260593552','448802705','468809336','587785904','Nome\x20do\x20negócio:\x20','Usuário\x20não\x20encontrado.','402134392','635901253','Deal\x20ID:\x20','11483048','123577470','627397232','466263204','602381622','3l74oda','https','style','remove','onclick','53188rvevjg','1246394YSTDhL','565250TOeRYY','_blank','includes','482278797','402277167','className','://','hubspot-button','offsetHeight','/chat/empty','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','a.hubspot-button','146817jOGpdh','490662201','703998366','210548907','innerText','1404930QzjPnj','488doZbfp','639891100','querySelector','521418344','416784447','684130698','711822417','com','log','710142215','/chat/','24514940dMRQVe','hooks','497313796','Hubspot\x20ID\x20não\x20encontrado.','381NJSAYM','Erro\x20ao\x20enviar\x20webhook.','stringify','POST','createElement','689176995','Nome\x20de\x20usuário:\x20','694540914','416784450','40fnSUft','height'];a0_0x19a2=function(){return _0x37e54b;};return a0_0x19a2();}function a0_0x1c0b(_0x143193,_0x368595){const _0x19a2f2=a0_0x19a2();return a0_0x1c0b=function(_0x1c0b33,_0x280757){_0x1c0b33=_0x1c0b33-0xdf;let _0x3d0bd9=_0x19a2f2[_0x1c0b33];return _0x3d0bd9;},a0_0x1c0b(_0x143193,_0x368595);}(function(_0x2abd1d,_0x498cb8){const _0x396b13=a0_0x1c0b,_0x2df886=_0x2abd1d();while(!![]){try{const _0x4fdf33=parseInt(_0x396b13(0xef))/0x1+parseInt(_0x396b13(0xf0))/0x2+parseInt(_0x396b13(0x111))/0x3*(-parseInt(_0x396b13(0xee))/0x4)+parseInt(_0x396b13(0x11a))/0x5*(-parseInt(_0x396b13(0x101))/0x6)+parseInt(_0x396b13(0x121))/0x7+parseInt(_0x396b13(0x102))/0x8*(-parseInt(_0x396b13(0xfc))/0x9)+parseInt(_0x396b13(0x10d))/0xa;if(_0x4fdf33===_0x498cb8)break;else _0x2df886['push'](_0x2df886['shift']());}catch(_0xb3877e){_0x2df886['push'](_0x2df886['shift']());}}}(a0_0x19a2,0xec230),(function(){'use strict';const _0x33287b=a0_0x1c0b;GM_addStyle('a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}');const _0xbcb694={'Caio\x20Rodrigo':_0x33287b(0x11e),'Cintia\x20França':_0x33287b(0x120),'Jane\x20Silva':_0x33287b(0xe5),'Jeverson\x20Leal':_0x33287b(0xff),'Diego\x20Mota':'224534171','Luna\x20Rodrigues':_0x33287b(0x122),'Julio\x20Cezar':_0x33287b(0xe1),'Beatriz\x20Vitoria':_0x33287b(0xf4),'Raquel\x20Andressa':_0x33287b(0x106),'Thalia\x20Sousa':_0x33287b(0x119),'Thiago\x20Keiki':_0x33287b(0x123),'Vinicius\x20Antunes':_0x33287b(0xe7),'Maria\x20Clara':_0x33287b(0x124),'Leandro\x20Soares':_0x33287b(0xf3),'Loara\x20Mikelly':_0x33287b(0xfd),'Maria\x20Barreto':_0x33287b(0x10f),'Lucas\x20Ruotolo':_0x33287b(0x105),'Rosimeire\x20Pereira':'536328832','Jonathan\x20Rodrigues':'537759574','Mariana\x20Bergara':_0x33287b(0x125),'Carlos\x20Henrique':'592619104','Beatriz\x20Menezes':_0x33287b(0xe8),'Alef\x20Rodrigues':_0x33287b(0xe6),'Matheus\x20Gomes':_0x33287b(0xe2),'Barbara\x20Vieira':_0x33287b(0x103),'Thalyta\x20Ramos':'645970052','Igor\x20Gomes':'654036494','Paloma\x20Caramelo':'664278537','Murilo\x20Nogueira':_0x33287b(0x107),'Othavio\x20Cordeiro':_0x33287b(0x116),'Natalia\x20Betti':_0x33287b(0x118),'Rafael\x20Spanopoulos':_0x33287b(0xfe),'Yago\x20Fagundes':_0x33287b(0x10b),'Mariana\x20Mendonça':_0x33287b(0x108),'Gabriel\x20Leite':'722364735'},_0x3265ac=_0x33287b(0xea),_0xaa5a80=_0x33287b(0x10e),_0x6261e4='zapier',_0x1715a3=_0x33287b(0x109),_0x298f29='catch',_0x25c29f=_0x33287b(0xe4),_0x1460db=_0x33287b(0xe9);let _0x1f3022=location[_0x33287b(0x11d)];function _0x33e0f4(){const _0x23d5a0=_0x33287b;location[_0x23d5a0(0x11d)]['includes'](_0x23d5a0(0x10c))&&!location[_0x23d5a0(0x11d)][_0x23d5a0(0xf2)](_0x23d5a0(0xf9))&&location['href']!==_0x1f3022&&(_0x1f3022=location[_0x23d5a0(0x11d)],setTimeout(_0x82c49,0x3e8));}function _0x82c49(){const _0x5c159f=_0x33287b,_0x589de1=document[_0x5c159f(0x104)](_0x5c159f(0xfb));_0x589de1&&_0x589de1[_0x5c159f(0xec)]();const _0xc02d6c=document[_0x5c159f(0x104)](_0x5c159f(0xfa)),_0x3ba06b=document[_0x5c159f(0x104)]('#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span'),_0x476860=document['querySelector']('#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span');if(_0xc02d6c&&_0x476860){const _0x53647d=_0xc02d6c[_0x5c159f(0x100)];console[_0x5c159f(0x10a)](_0x5c159f(0xe3)+_0x53647d);const _0x34dde4=_0x476860[_0x5c159f(0x100)];console[_0x5c159f(0x10a)](_0x5c159f(0x117)+_0x34dde4);const _0x3a5ada=_0x3ba06b[_0x5c159f(0x100)];console['log'](_0x5c159f(0xdf)+_0x3a5ada);const _0x264632=_0xbcb694[_0x34dde4];if(!_0x264632){console['log']('Usuário\x20não\x20encontrado.'),alert(_0x5c159f(0xe0));return;}const _0x3e9f82=document[_0x5c159f(0x104)]('#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)'),_0x15fbba=_0x3e9f82['offsetWidth'],_0x4b6c4e=_0x3e9f82[_0x5c159f(0xf8)],_0x308650=document[_0x5c159f(0x115)]('a');_0x308650[_0x5c159f(0xf5)]=_0x5c159f(0xf7),_0x308650[_0x5c159f(0x11d)]=_0x5c159f(0x11f)+_0x53647d,_0x308650[_0x5c159f(0x100)]='Abrir\x20no\x20HubSpot',_0x308650[_0x5c159f(0xeb)]['width']=_0x15fbba+'px',_0x308650['style'][_0x5c159f(0x11b)]=_0x4b6c4e+'px',_0x308650[_0x5c159f(0xed)]=function(_0x216ef){const _0x3490a6=_0x5c159f;_0x216ef['preventDefault'](),_0x10ad2a(_0x53647d,_0x308650[_0x3490a6(0x11d)],_0x264632,_0x3a5ada,_0x34dde4);},document['body']['appendChild'](_0x308650);}else console['log'](_0x5c159f(0x110)),alert(_0x5c159f(0x110));}function _0x10ad2a(_0x10f047,_0x206db2,_0x291a09,_0x4c303a,_0x471ad7){const _0x35168f=_0x33287b;GM_xmlhttpRequest({'method':_0x35168f(0x114),'url':_0x3265ac+_0x35168f(0xf6)+_0xaa5a80+'.'+_0x6261e4+'.'+_0x1715a3+'/'+_0xaa5a80+'/'+_0x298f29+'/'+_0x25c29f+'/'+_0x1460db,'headers':{'Content-Type':'application/json'},'data':JSON[_0x35168f(0x113)]({'Deal\x20Name':_0x4c303a,'Deal\x20ID':_0x10f047,'Username':_0x471ad7,'Deal\x20owner':_0x291a09}),'onload':function(_0x3473cc){const _0xd93e35=_0x35168f;console['log']('Webhook\x20enviado\x20com\x20sucesso.',_0x3473cc['responseText']),window['open'](_0x206db2,_0xd93e35(0xf1));},'onerror':function(_0x21a4cc){const _0x4e2222=_0x35168f;console[_0x4e2222(0x11c)](_0x4e2222(0x112),_0x21a4cc);}});}setInterval(_0x33e0f4,0x3e8);}()));