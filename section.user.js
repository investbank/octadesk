// ==UserScript==
// @name         Octadesk to Hubspot
// @author       Caio Rodrigo
// @version      v3.6
// @run-at       document-end
// @run-at       document-idle
// @grant        GM_addStyle
// @grant        GM_xmlhttpRequest
// @namespace    https://app.octadesk.com/
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @updateURL    https://github.com/investbank/octadesk/main/section.user.js
// @downloadURL  https://raw.githubusercontent.com/investbank/octadesk/main/section.user.js
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// ==/UserScript==

function a0_0x2075(_0x4b6747,_0x2f2b7c){const _0x3a3efa=a0_0x3a3e();return a0_0x2075=function(_0x207523,_0xf9cb0a){_0x207523=_0x207523-0x19a;let _0x114106=_0x3a3efa[_0x207523];return _0x114106;},a0_0x2075(_0x4b6747,_0x2f2b7c);}(function(_0x326981,_0x2ca506){const _0x4a460d=a0_0x2075,_0x1843e0=_0x326981();while(!![]){try{const _0x5b3542=-parseInt(_0x4a460d(0x19c))/0x1*(parseInt(_0x4a460d(0x1b5))/0x2)+-parseInt(_0x4a460d(0x1b0))/0x3+-parseInt(_0x4a460d(0x1ce))/0x4+parseInt(_0x4a460d(0x1b6))/0x5+-parseInt(_0x4a460d(0x1dd))/0x6*(-parseInt(_0x4a460d(0x1e4))/0x7)+-parseInt(_0x4a460d(0x1c1))/0x8*(parseInt(_0x4a460d(0x1d8))/0x9)+-parseInt(_0x4a460d(0x1b2))/0xa*(-parseInt(_0x4a460d(0x1d9))/0xb);if(_0x5b3542===_0x2ca506)break;else _0x1843e0['push'](_0x1843e0['shift']());}catch(_0x362f58){_0x1843e0['push'](_0x1843e0['shift']());}}}(a0_0x3a3e,0x4fff2),(function(){'use strict';const _0x5d590e=a0_0x2075;GM_addStyle(_0x5d590e(0x1b1));const _0x1ae41d={'Caio\x20Rodrigo':_0x5d590e(0x1e6),'Cintia\x20França':'121318700','Jane\x20Silva':'123577470','Jeverson\x20Leal':_0x5d590e(0x1a6),'Diego\x20Mota':_0x5d590e(0x1a3),'Luna\x20Rodrigues':_0x5d590e(0x1e0),'Julio\x20Cezar':_0x5d590e(0x1da),'Beatriz\x20Vitoria':_0x5d590e(0x1be),'Raquel\x20Andressa':'416784447','Thalia\x20Sousa':_0x5d590e(0x1d3),'Thiago\x20Keiki':_0x5d590e(0x1e7),'Vinicius\x20Antunes':'466263204','Maria\x20Clara':_0x5d590e(0x1cc),'Leandro\x20Soares':_0x5d590e(0x1db),'Loara\x20Mikelly':_0x5d590e(0x1c5),'Maria\x20Barreto':'497313796','Lucas\x20Ruotolo':_0x5d590e(0x1bf),'Rosimeire\x20Pereira':_0x5d590e(0x1cd),'Jonathan\x20Rodrigues':_0x5d590e(0x1b4),'Mariana\x20Bergara':_0x5d590e(0x1d0),'Carlos\x20Henrique':_0x5d590e(0x1b3),'Beatriz\x20Menezes':'602381622','Alef\x20Rodrigues':_0x5d590e(0x1e2),'Matheus\x20Gomes':_0x5d590e(0x1df),'Barbara\x20Vieira':'639891100','Thalyta\x20Ramos':'645970052','Igor\x20Gomes':_0x5d590e(0x1a0),'Paloma\x20Caramelo':_0x5d590e(0x1ca),'Murilo\x20Nogueira':_0x5d590e(0x19f),'Othavio\x20Cordeiro':'689176995','Natalia\x20Betti':_0x5d590e(0x1c3),'Rafael\x20Spanopoulos':_0x5d590e(0x1d5),'Yago\x20Fagundes':_0x5d590e(0x1b8),'Mariana\x20Mendonça':_0x5d590e(0x1a5),'Gabriel\x20Leite':_0x5d590e(0x1dc)},_0x1c08bf=_0x5d590e(0x1a8),_0x36c216=_0x5d590e(0x1a2),_0x880405='zapier',_0x42a739=_0x5d590e(0x1af),_0x5e40a2=_0x5d590e(0x1d6),_0x58a269='11483048',_0x2a5d11=_0x5d590e(0x1ae);let _0x2168fc=location[_0x5d590e(0x1de)];function _0x4bc7d5(){const _0x3d2dca=_0x5d590e;location[_0x3d2dca(0x1de)][_0x3d2dca(0x19b)](_0x3d2dca(0x1a1))&&!location[_0x3d2dca(0x1de)][_0x3d2dca(0x19b)]('/chat/empty')&&location['href']!==_0x2168fc&&(_0x2168fc=location[_0x3d2dca(0x1de)],setTimeout(_0x4a89da,0x3e8));}function _0x4a89da(){const _0x2afea8=_0x5d590e,_0x5dfece=document['querySelector'](_0x2afea8(0x1e1));_0x5dfece&&_0x5dfece[_0x2afea8(0x1ba)]();const _0x30ac74=document[_0x2afea8(0x1ac)](_0x2afea8(0x1bd)),_0x134526=document[_0x2afea8(0x1ac)](_0x2afea8(0x1a9)),_0x3c26ba=document['querySelector']('#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span');if(_0x30ac74&&_0x3c26ba){const _0x1140f0=_0x30ac74[_0x2afea8(0x1ab)];console[_0x2afea8(0x1a4)](_0x2afea8(0x1c8)+_0x1140f0);const _0xdab030=_0x3c26ba[_0x2afea8(0x1ab)];console[_0x2afea8(0x1a4)](_0x2afea8(0x1bb)+_0xdab030);const _0x48c4fd=_0x134526['innerText'];console[_0x2afea8(0x1a4)](_0x2afea8(0x19d)+_0x48c4fd);const _0x2e1413=_0x1ae41d[_0xdab030];if(!_0x2e1413){console[_0x2afea8(0x1a4)](_0x2afea8(0x1c2)),alert('Usuário\x20não\x20encontrado.');return;}const _0x527c0e=document['querySelector'](_0x2afea8(0x1c7)),_0x267f84=_0x527c0e['offsetWidth'],_0x7ff20=_0x527c0e[_0x2afea8(0x1c9)],_0x284783=document[_0x2afea8(0x1b9)]('a');_0x284783[_0x2afea8(0x1d1)]='hubspot-button',_0x284783['href']=_0x2afea8(0x1cf)+_0x1140f0,_0x284783['innerText']=_0x2afea8(0x1c4),_0x284783[_0x2afea8(0x1e5)][_0x2afea8(0x1d4)]=_0x267f84+'px',_0x284783[_0x2afea8(0x1e5)][_0x2afea8(0x1c6)]=_0x7ff20+'px',_0x284783[_0x2afea8(0x19e)]=function(_0x1728a7){const _0x16c732=_0x2afea8;_0x1728a7[_0x16c732(0x1a7)](),_0x223516(_0x1140f0,_0x284783['href'],_0x2e1413,_0x48c4fd,_0xdab030);},document[_0x2afea8(0x1d2)]['appendChild'](_0x284783);}else console[_0x2afea8(0x1a4)](_0x2afea8(0x1cb)),alert(_0x2afea8(0x1cb));}function _0x223516(_0x4cd4a6,_0x1f1672,_0x101bc3,_0xc43b17,_0x7eabb4){const _0x8f8387=_0x5d590e;GM_xmlhttpRequest({'method':_0x8f8387(0x1c0),'url':_0x1c08bf+_0x8f8387(0x1b7)+_0x36c216+'.'+_0x880405+'.'+_0x42a739+'/'+_0x36c216+'/'+_0x5e40a2+'/'+_0x58a269+'/'+_0x2a5d11,'headers':{'Content-Type':_0x8f8387(0x1e3)},'data':JSON[_0x8f8387(0x1bc)]({'Deal\x20Name':_0xc43b17,'Deal\x20ID':_0x4cd4a6,'Username':_0x7eabb4,'Deal\x20owner':_0x101bc3}),'onload':function(_0x459017){const _0x171ee9=_0x8f8387;console[_0x171ee9(0x1a4)](_0x171ee9(0x1d7),_0x459017['responseText']),window[_0x171ee9(0x1aa)](_0x1f1672,'_blank');},'onerror':function(_0x4045cd){const _0x599ecb=_0x8f8387;console[_0x599ecb(0x1ad)](_0x599ecb(0x19a),_0x4045cd);}});}setInterval(_0x4bc7d5,0x3e8);}()));function a0_0x3a3e(){const _0x8f82c8=['error','3l74oda','com','305832aqgiAB','a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}','1608080DLNeHS','592619104','537759574','115738qQbBam','914335SeJBdH','://','710142215','createElement','remove','Nome\x20de\x20usuário:\x20','stringify','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','402277167','521418344','POST','8WWucvS','Usuário\x20não\x20encontrado.','694540914','Abrir\x20no\x20HubSpot','490662201','height','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)','Deal\x20ID:\x20','offsetHeight','664278537','Hubspot\x20ID\x20não\x20encontrado.','468809336','536328832','2356060ocdJRl','https://app.hubspot.com/contacts/5867570/record/0-3/','587785904','className','body','416784450','width','703998366','catch','Webhook\x20enviado\x20com\x20sucesso.','4738743HEkiyC','66SVVvmx','402134392','482278797','722364735','3773478JfzxiS','href','635901253','260593552','a.hubspot-button','627397232','application/json','7kNZwoQ','style','36711165','448802705','Erro\x20ao\x20enviar\x20webhook.','includes','4jZuBqJ','Nome\x20do\x20negócio:\x20','onclick','684130698','654036494','/chat/','hooks','224534171','log','711822417','210548907','preventDefault','https','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','open','innerText','querySelector'];a0_0x3a3e=function(){return _0x8f82c8;};return a0_0x3a3e();}