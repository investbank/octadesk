// ==UserScript==
// @name         Octadesk to Hubspot
// @author       Caio Rodrigo
// @version      v3.5
// @run-at       document-end
// @run-at       document-idle
// @grant        GM_addStyle
// @grant        GM_xmlhttpRequest
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @updateURL    https://github.com/investbank/octadesk/main/section.user.js
// @downloadURL  https://raw.githubusercontent.com/investbank/octadesk/main/section.user.js
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// ==/UserScript==

function a0_0x572e(_0x3effff,_0x2e1b9c){const _0x236b40=a0_0x236b();return a0_0x572e=function(_0x572e62,_0x3e8960){_0x572e62=_0x572e62-0xff;let _0x29ac2e=_0x236b40[_0x572e62];return _0x29ac2e;},a0_0x572e(_0x3effff,_0x2e1b9c);}(function(_0xdf1c88,_0x1e5eb3){const _0x4ae80d=a0_0x572e,_0x20e91c=_0xdf1c88();while(!![]){try{const _0x9af975=parseInt(_0x4ae80d(0x113))/0x1*(parseInt(_0x4ae80d(0x12d))/0x2)+-parseInt(_0x4ae80d(0x108))/0x3+-parseInt(_0x4ae80d(0xff))/0x4+-parseInt(_0x4ae80d(0x129))/0x5+-parseInt(_0x4ae80d(0x146))/0x6*(-parseInt(_0x4ae80d(0x11b))/0x7)+-parseInt(_0x4ae80d(0x107))/0x8+parseInt(_0x4ae80d(0x148))/0x9;if(_0x9af975===_0x1e5eb3)break;else _0x20e91c['push'](_0x20e91c['shift']());}catch(_0x20f9d1){_0x20e91c['push'](_0x20e91c['shift']());}}}(a0_0x236b,0x8ec50),(function(){'use strict';const _0x303bcf=a0_0x572e;GM_addStyle(_0x303bcf(0x11f));const _0x2b00fa={'Caio\x20Rodrigo':_0x303bcf(0x10f),'Cintia\x20França':'121318700','Jane\x20Silva':_0x303bcf(0x138),'Jeverson\x20Leal':_0x303bcf(0x117),'Diego\x20Mota':_0x303bcf(0x11a),'Luna\x20Rodrigues':_0x303bcf(0x134),'Julio\x20Cezar':'402134392','Beatriz\x20Vitoria':_0x303bcf(0x12e),'Raquel\x20Andressa':_0x303bcf(0x143),'Thalia\x20Sousa':_0x303bcf(0x106),'Thiago\x20Keiki':_0x303bcf(0x118),'Vinicius\x20Antunes':_0x303bcf(0x125),'Maria\x20Clara':'468809336','Leandro\x20Soares':'482278797','Loara\x20Mikelly':_0x303bcf(0x115),'Maria\x20Barreto':_0x303bcf(0x132),'Lucas\x20Ruotolo':_0x303bcf(0x121),'Rosimeire\x20Pereira':_0x303bcf(0x10d),'Jonathan\x20Rodrigues':'537759574','Mariana\x20Bergara':_0x303bcf(0x122),'Carlos\x20Henrique':_0x303bcf(0x13f),'Beatriz\x20Menezes':'602381622','Alef\x20Rodrigues':_0x303bcf(0x124),'Matheus\x20Gomes':'635901253','Barbara\x20Vieira':_0x303bcf(0x133),'Thalyta\x20Ramos':_0x303bcf(0x13b),'Igor\x20Gomes':_0x303bcf(0x104),'Paloma\x20Caramelo':_0x303bcf(0x137),'Murilo\x20Nogueira':_0x303bcf(0x141),'Othavio\x20Cordeiro':'689176995','Natalia\x20Betti':_0x303bcf(0x13d),'Rafael\x20Spanopoulos':_0x303bcf(0x101),'Yago\x20Fagundes':_0x303bcf(0x10b),'Mariana\x20Mendonça':'711822417','Gabriel\x20Leite':'722364735'},_0x1ad758='https',_0x2de39c='hooks',_0x20f946='zapier',_0x454d51=_0x303bcf(0x116),_0xb15c81=_0x303bcf(0x13e),_0x3a26a2=_0x303bcf(0x10a),_0x14c99c=_0x303bcf(0x11d);let _0x140179=location[_0x303bcf(0x13a)];function _0x488f44(){const _0x3ab12b=_0x303bcf;location[_0x3ab12b(0x13a)][_0x3ab12b(0x110)](_0x3ab12b(0x109))&&!location['href'][_0x3ab12b(0x110)]('/chat/empty')&&location[_0x3ab12b(0x13a)]!==_0x140179&&(_0x140179=location[_0x3ab12b(0x13a)],setTimeout(_0x1b6f9e,0x3e8));}function _0x1b6f9e(){const _0x271ce9=_0x303bcf,_0x547460=document[_0x271ce9(0x144)](_0x271ce9(0x142));_0x547460&&_0x547460[_0x271ce9(0x140)]();const _0x55f0dc=document[_0x271ce9(0x144)](_0x271ce9(0x147)),_0x42bd8d=document[_0x271ce9(0x144)]('#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span'),_0x537d1e=document[_0x271ce9(0x144)](_0x271ce9(0x12b));if(_0x55f0dc&&_0x537d1e){const _0x164bdb=_0x55f0dc['innerText'];console['log'](_0x271ce9(0x114)+_0x164bdb);const _0x464869=_0x537d1e['innerText'];console[_0x271ce9(0x126)]('Nome\x20de\x20usuário:\x20'+_0x464869);const _0x20d161=_0x42bd8d[_0x271ce9(0x100)];console['log'](_0x271ce9(0x12c)+_0x20d161);const _0x37d807=_0x2b00fa[_0x464869];if(!_0x37d807){console[_0x271ce9(0x126)](_0x271ce9(0x119)),alert(_0x271ce9(0x119));return;}const _0x29771b=document[_0x271ce9(0x144)]('#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)'),_0x12ff73=_0x29771b[_0x271ce9(0x120)],_0x59c28f=_0x29771b['offsetHeight'],_0x2da919=document['createElement']('a');_0x2da919[_0x271ce9(0x12a)]=_0x271ce9(0x139),_0x2da919[_0x271ce9(0x13a)]=_0x271ce9(0x102)+_0x164bdb,_0x2da919[_0x271ce9(0x100)]=_0x271ce9(0x145),_0x2da919[_0x271ce9(0x103)][_0x271ce9(0x112)]=_0x12ff73+'px',_0x2da919[_0x271ce9(0x103)]['height']=_0x59c28f+'px',_0x2da919[_0x271ce9(0x10c)]=function(_0x47886b){const _0x1ebdaa=_0x271ce9;_0x47886b[_0x1ebdaa(0x136)](),_0x47dc56(_0x164bdb,_0x2da919[_0x1ebdaa(0x13a)],_0x37d807,_0x20d161,_0x464869);},document[_0x271ce9(0x13c)][_0x271ce9(0x11e)](_0x2da919);}else console[_0x271ce9(0x126)](_0x271ce9(0x12f)),alert('Hubspot\x20ID\x20não\x20encontrado.');}function _0x47dc56(_0x1f0523,_0x3857ec,_0x232f3d,_0xaf42ec,_0x2b6c91){const _0x7dcc5d=_0x303bcf;GM_xmlhttpRequest({'method':_0x7dcc5d(0x123),'url':_0x1ad758+_0x7dcc5d(0x10e)+_0x2de39c+'.'+_0x20f946+'.'+_0x454d51+'/'+_0x2de39c+'/'+_0xb15c81+'/'+_0x3a26a2+'/'+_0x14c99c,'headers':{'Content-Type':_0x7dcc5d(0x105)},'data':JSON[_0x7dcc5d(0x111)]({'Deal\x20Name':_0xaf42ec,'Deal\x20ID':_0x1f0523,'Username':_0x2b6c91,'Deal\x20owner':_0x232f3d}),'onload':function(_0x53ce70){const _0x3bd83e=_0x7dcc5d;console[_0x3bd83e(0x126)](_0x3bd83e(0x135),_0x53ce70[_0x3bd83e(0x130)]),window[_0x3bd83e(0x127)](_0x3857ec,_0x3bd83e(0x128));},'onerror':function(_0x543ac4){const _0x538df1=_0x7dcc5d;console[_0x538df1(0x11c)](_0x538df1(0x131),_0x543ac4);}});}setInterval(_0x488f44,0x3e8);}()));function a0_0x236b(){const _0x1dbb7a=['531992dEebae','2181942vPiZQY','/chat/','11483048','710142215','onclick','536328832','://','36711165','includes','stringify','width','1fRSqmP','Deal\x20ID:\x20','490662201','com','210548907','448802705','Usuário\x20não\x20encontrado.','224534171','7796068tygyoX','error','3l74oda','appendChild','a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}','offsetWidth','521418344','587785904','POST','627397232','466263204','log','open','_blank','1747995ceWXmd','className','#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span','Nome\x20do\x20negócio:\x20','806412cICwzM','402277167','Hubspot\x20ID\x20não\x20encontrado.','responseText','Erro\x20ao\x20enviar\x20webhook.','497313796','639891100','260593552','Webhook\x20enviado\x20com\x20sucesso.','preventDefault','664278537','123577470','hubspot-button','href','645970052','body','694540914','catch','592619104','remove','684130698','a.hubspot-button','416784447','querySelector','Abrir\x20no\x20HubSpot','6BJvVGN','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','5561415YNNUwW','1626676PfTALS','innerText','703998366','https://app.hubspot.com/contacts/5867570/record/0-3/','style','654036494','application/json','416784450'];a0_0x236b=function(){return _0x1dbb7a;};return a0_0x236b();}