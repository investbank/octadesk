// ==UserScript==
// @name         Octadesk to Hubspot
// @author       Caio Rodrigo
// @version      4.0
// @run-at       document-end
// @run-at       document-idle
// @grant        GM_addStyle
// @grant        GM_xmlhttpRequest
// @namespace    https://app.octadesk.com/
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @updateURL    https://github.com/investbank/octadesk/main/section.user.js
// @downloadURL  https://raw.githubusercontent.com/investbank/octadesk/main/section.user.js
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// ==/UserScript==

function a0_0x4291(){const _0x2579ac=['710142215','592619104','offsetHeight','a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}','com','3l74oda','Nome\x20de\x20usuário:\x20','11700430dYpSGe','createElement','497313796','587785904','https','remove','627397232','log','11483048','Usuário\x20não\x20encontrado.','402277167','36711165','Webhook\x20enviado\x20com\x20sucesso.','210548907','123577470','689176995','POST','preventDefault','482278797','href','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','287lUbDNE','appendChild','711822417','536328832','Deal\x20ID:\x20','includes','onclick','537759574','1182364bMNpnI','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','19662OyIICU','style','body','catch','416784447','694540914','4146021kRtGIF','innerText','490662201','Hubspot\x20ID\x20não\x20encontrado.','querySelector','654036494','://','Nome\x20do\x20negócio:\x20','#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span','hooks','260593552','Erro\x20ao\x20enviar\x20webhook.','4510644KFqpYB','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)','94216PeEsSQ','stringify','https://app.hubspot.com/contacts/5867570/record/0-3/','error','14055vdnKDe','hubspot-button','_blank','722364735','635901253','/chat/','height','416784450','645970052','684130698','className','703998366','736cNzHxz','224534171','402134392','responseText','application/json','/chat/empty','width','134hNCAcc','448802705'];a0_0x4291=function(){return _0x2579ac;};return a0_0x4291();}function a0_0x42d1(_0x1aa9b7,_0x4ed6f4){const _0x429169=a0_0x4291();return a0_0x42d1=function(_0x42d1fa,_0x2544cd){_0x42d1fa=_0x42d1fa-0x1c9;let _0xee8ce2=_0x429169[_0x42d1fa];return _0xee8ce2;},a0_0x42d1(_0x1aa9b7,_0x4ed6f4);}(function(_0x10f971,_0x302338){const _0x504ec5=a0_0x42d1,_0x43bbb6=_0x10f971();while(!![]){try{const _0xb8b710=-parseInt(_0x504ec5(0x1d4))/0x1+parseInt(_0x504ec5(0x201))/0x2*(parseInt(_0x504ec5(0x1d6))/0x3)+parseInt(_0x504ec5(0x1fa))/0x4*(-parseInt(_0x504ec5(0x1ee))/0x5)+parseInt(_0x504ec5(0x1e8))/0x6+-parseInt(_0x504ec5(0x1cc))/0x7*(parseInt(_0x504ec5(0x1ea))/0x8)+parseInt(_0x504ec5(0x1dc))/0x9+parseInt(_0x504ec5(0x20a))/0xa;if(_0xb8b710===_0x302338)break;else _0x43bbb6['push'](_0x43bbb6['shift']());}catch(_0xfda89){_0x43bbb6['push'](_0x43bbb6['shift']());}}}(a0_0x4291,0x9c0b7),(function(){'use strict';const _0xaf5245=a0_0x42d1;GM_addStyle(_0xaf5245(0x206));const _0x42c529={'Caio\x20Rodrigo':_0xaf5245(0x215),'Cintia\x20França':'121318700','Jane\x20Silva':_0xaf5245(0x218),'Jeverson\x20Leal':_0xaf5245(0x217),'Diego\x20Mota':_0xaf5245(0x1fb),'Luna\x20Rodrigues':_0xaf5245(0x1e6),'Julio\x20Cezar':_0xaf5245(0x1fc),'Beatriz\x20Vitoria':_0xaf5245(0x214),'Raquel\x20Andressa':_0xaf5245(0x1da),'Thalia\x20Sousa':_0xaf5245(0x1f5),'Thiago\x20Keiki':_0xaf5245(0x202),'Vinicius\x20Antunes':'466263204','Maria\x20Clara':'468809336','Leandro\x20Soares':_0xaf5245(0x1c9),'Loara\x20Mikelly':_0xaf5245(0x1de),'Maria\x20Barreto':_0xaf5245(0x20c),'Lucas\x20Ruotolo':'521418344','Rosimeire\x20Pereira':_0xaf5245(0x1cf),'Jonathan\x20Rodrigues':_0xaf5245(0x1d3),'Mariana\x20Bergara':_0xaf5245(0x20d),'Carlos\x20Henrique':_0xaf5245(0x204),'Beatriz\x20Menezes':'602381622','Alef\x20Rodrigues':_0xaf5245(0x210),'Matheus\x20Gomes':_0xaf5245(0x1f2),'Barbara\x20Vieira':'639891100','Thalyta\x20Ramos':_0xaf5245(0x1f6),'Igor\x20Gomes':_0xaf5245(0x1e1),'Paloma\x20Caramelo':'664278537','Murilo\x20Nogueira':_0xaf5245(0x1f7),'Othavio\x20Cordeiro':_0xaf5245(0x219),'Natalia\x20Betti':_0xaf5245(0x1db),'Rafael\x20Spanopoulos':_0xaf5245(0x1f9),'Yago\x20Fagundes':_0xaf5245(0x203),'Mariana\x20Mendonça':_0xaf5245(0x1ce),'Gabriel\x20Leite':_0xaf5245(0x1f1)},_0x3107fe=_0xaf5245(0x20e),_0x4df1c2=_0xaf5245(0x1e5),_0x10bee7='zapier',_0xacff23=_0xaf5245(0x207),_0x22329b=_0xaf5245(0x1d9),_0x3e1610=_0xaf5245(0x212),_0x29f28c=_0xaf5245(0x208);let _0x3c15ec=location[_0xaf5245(0x1ca)];function _0x5dc7ea(){const _0x48fd86=_0xaf5245;location['href']['includes'](_0x48fd86(0x1f3))&&!location[_0x48fd86(0x1ca)][_0x48fd86(0x1d1)](_0x48fd86(0x1ff))&&location['href']!==_0x3c15ec&&(_0x3c15ec=location[_0x48fd86(0x1ca)],setTimeout(_0x1996e1,0x3e8));}function _0x1996e1(){const _0x2e1401=_0xaf5245,_0x4b1074=document['querySelector']('a.hubspot-button');_0x4b1074&&_0x4b1074[_0x2e1401(0x20f)]();const _0x141031=document[_0x2e1401(0x1e0)](_0x2e1401(0x1d5)),_0x19294b=document['querySelector'](_0x2e1401(0x1cb)),_0x2e269b=document[_0x2e1401(0x1e0)](_0x2e1401(0x1e4));if(_0x141031&&_0x2e269b){const _0x5eccdc=_0x141031[_0x2e1401(0x1dd)];console[_0x2e1401(0x211)](_0x2e1401(0x1d0)+_0x5eccdc);const _0x1c6268=_0x2e269b['innerText'];console['log'](_0x2e1401(0x209)+_0x1c6268);const _0x1239cd=_0x19294b[_0x2e1401(0x1dd)];console[_0x2e1401(0x211)](_0x2e1401(0x1e3)+_0x1239cd);const _0x1e45fd=_0x42c529[_0x1c6268];if(!_0x1e45fd){console[_0x2e1401(0x211)](_0x2e1401(0x213)),alert(_0x2e1401(0x213));return;}const _0x39dff1=document[_0x2e1401(0x1e0)](_0x2e1401(0x1e9)),_0x55ed64=_0x39dff1['offsetWidth'],_0x2464a2=_0x39dff1[_0x2e1401(0x205)],_0x1ac4ba=document[_0x2e1401(0x20b)]('a');_0x1ac4ba[_0x2e1401(0x1f8)]=_0x2e1401(0x1ef),_0x1ac4ba[_0x2e1401(0x1ca)]=_0x2e1401(0x1ec)+_0x5eccdc,_0x1ac4ba['innerText']='Abrir\x20no\x20HubSpot',_0x1ac4ba[_0x2e1401(0x1d7)][_0x2e1401(0x200)]=_0x55ed64+'px',_0x1ac4ba['style'][_0x2e1401(0x1f4)]=_0x2464a2+'px',_0x1ac4ba[_0x2e1401(0x1d2)]=function(_0x16f55b){const _0x2a8de5=_0x2e1401;_0x16f55b[_0x2a8de5(0x21b)](),_0x2b2515(_0x5eccdc,_0x1ac4ba[_0x2a8de5(0x1ca)],_0x1e45fd,_0x1239cd,_0x1c6268);},document[_0x2e1401(0x1d8)][_0x2e1401(0x1cd)](_0x1ac4ba);}else console[_0x2e1401(0x211)]('Hubspot\x20ID\x20não\x20encontrado.'),alert(_0x2e1401(0x1df));}function _0x2b2515(_0xc207c6,_0x7972ec,_0x14c93b,_0x39e47e,_0x1a7565){const _0x40b095=_0xaf5245;GM_xmlhttpRequest({'method':_0x40b095(0x21a),'url':_0x3107fe+_0x40b095(0x1e2)+_0x4df1c2+'.'+_0x10bee7+'.'+_0xacff23+'/'+_0x4df1c2+'/'+_0x22329b+'/'+_0x3e1610+'/'+_0x29f28c,'headers':{'Content-Type':_0x40b095(0x1fe)},'data':JSON[_0x40b095(0x1eb)]({'Deal\x20Name':_0x39e47e,'Deal\x20ID':_0xc207c6,'Username':_0x1a7565,'Deal\x20owner':_0x14c93b}),'onload':function(_0x699e2f){const _0x5a354d=_0x40b095;console['log'](_0x5a354d(0x216),_0x699e2f[_0x5a354d(0x1fd)]),window['open'](_0x7972ec,_0x5a354d(0x1f0));},'onerror':function(_0x5633e4){const _0xe16593=_0x40b095;console[_0xe16593(0x1ed)](_0xe16593(0x1e7),_0x5633e4);}});}setInterval(_0x5dc7ea,0x3e8);}()));