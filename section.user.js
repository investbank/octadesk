// ==UserScript==
// @name         Octadesk to Hubspot
// @author       Caio Rodrigo
// @version      v3.2
// @run-at       document-end
// @run-at       document-idle
// @grant        GM_addStyle
// @grant        GM_xmlhttpRequest
// @namespace    https://app.octadesk.com/
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @downloadURL  https://cdn.jsdelivr.net/gh/investbank/octadesk@main/section.js
// @updateURL    https://raw.githubusercontent.com/investbank/octadesk/main/section.js
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// ==/UserScript==

function a0_0x19c7(){const _0x2dc419=['includes','a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}','351530ZCOoQu','href','appendChild','635901253','143351bNukEK','536328832','catch','521418344','703998366','POST','offsetWidth','://','remove','627397232','Hubspot\x20ID\x20não\x20encontrado.','innerText','11483048','11238LuSyxT','error','224534171','hubspot-button','Deal\x20ID:\x20','654036494','3107790LnsCPE','/chat/empty','3yOPnIz','468809336','1393CjPnbt','height','querySelector','416784450','Nome\x20de\x20usuário:\x20','204fxNOes','body','121318700','710142215','9031ikpswq','stringify','1059992VoOZCL','/chat/','3l74oda','694540914','722364735','260593552','8LRcveM','log','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)','style','application/json','592619104','482278797','https://app.hubspot.com/contacts/5867570/record/0-3/','602381622','2133788EPYTyf','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','15670PgjFiA','zapier','5GZdcva','a.hubspot-button','466263204','448802705','hooks','402134392','210548907','711822417'];a0_0x19c7=function(){return _0x2dc419;};return a0_0x19c7();}function a0_0x3c67(_0x19ce0a,_0x17a34c){const _0x19c78b=a0_0x19c7();return a0_0x3c67=function(_0x3c679a,_0x40df50){_0x3c679a=_0x3c679a-0x8b;let _0x1e5518=_0x19c78b[_0x3c679a];return _0x1e5518;},a0_0x3c67(_0x19ce0a,_0x17a34c);}(function(_0x9e9880,_0x293d0e){const _0x1f13ad=a0_0x3c67,_0x312aa5=_0x9e9880();while(!![]){try{const _0x31cf2d=parseInt(_0x1f13ad(0xb2))/0x1+parseInt(_0x1f13ad(0x8c))/0x2*(-parseInt(_0x1f13ad(0xa5))/0x3)+-parseInt(_0x1f13ad(0xc1))/0x4*(-parseInt(_0x1f13ad(0xc5))/0x5)+parseInt(_0x1f13ad(0x9d))/0x6*(parseInt(_0x1f13ad(0xa7))/0x7)+parseInt(_0x1f13ad(0xb8))/0x8*(parseInt(_0x1f13ad(0xa3))/0x9)+parseInt(_0x1f13ad(0xc3))/0xa*(-parseInt(_0x1f13ad(0xb0))/0xb)+-parseInt(_0x1f13ad(0xac))/0xc*(parseInt(_0x1f13ad(0x90))/0xd);if(_0x31cf2d===_0x293d0e)break;else _0x312aa5['push'](_0x312aa5['shift']());}catch(_0x19ed9f){_0x312aa5['push'](_0x312aa5['shift']());}}}(a0_0x19c7,0xa18f1),(function(){'use strict';const _0x9a602f=a0_0x3c67;GM_addStyle(_0x9a602f(0x8b));const _0x4c2579={'Caio\x20Rodrigo':'36711165','Cintia\x20França':_0x9a602f(0xae),'Jane\x20Silva':'123577470','Jeverson\x20Leal':_0x9a602f(0xcb),'Diego\x20Mota':_0x9a602f(0x9f),'Luna\x20Rodrigues':_0x9a602f(0xb7),'Julio\x20Cezar':_0x9a602f(0xca),'Beatriz\x20Vitoria':'402277167','Raquel\x20Andressa':'416784447','Thalia\x20Sousa':_0x9a602f(0xaa),'Thiago\x20Keiki':_0x9a602f(0xc8),'Vinicius\x20Antunes':_0x9a602f(0xc7),'Maria\x20Clara':_0x9a602f(0xa6),'Leandro\x20Soares':_0x9a602f(0xbe),'Loara\x20Mikelly':'490662201','Maria\x20Barreto':'497313796','Lucas\x20Ruotolo':_0x9a602f(0x93),'Rosimeire\x20Pereira':_0x9a602f(0x91),'Jonathan\x20Rodrigues':'537759574','Mariana\x20Bergara':'587785904','Carlos\x20Henrique':_0x9a602f(0xbd),'Beatriz\x20Menezes':_0x9a602f(0xc0),'Alef\x20Rodrigues':_0x9a602f(0x99),'Matheus\x20Gomes':_0x9a602f(0x8f),'Barbara\x20Vieira':'639891100','Thalyta\x20Ramos':'645970052','Igor\x20Gomes':_0x9a602f(0xa2),'Paloma\x20Caramelo':'664278537','Murilo\x20Nogueira':'684130698','Othavio\x20Cordeiro':'689176995','Natalia\x20Betti':_0x9a602f(0xb5),'Rafael\x20Spanopoulos':_0x9a602f(0x94),'Yago\x20Fagundes':_0x9a602f(0xaf),'Mariana\x20Mendonça':_0x9a602f(0xcc),'Gabriel\x20Leite':_0x9a602f(0xb6)},_0x991f6c='https',_0x5a5f62=_0x9a602f(0xc9),_0x49e5cf=_0x9a602f(0xc4),_0x3b3198='com',_0xe1e0e6=_0x9a602f(0x92),_0x23c3b4=_0x9a602f(0x9c),_0x133985=_0x9a602f(0xb4);let _0x18114b=location[_0x9a602f(0x8d)];function _0x1c121f(){const _0x30c0ff=_0x9a602f;location['href'][_0x30c0ff(0xcd)](_0x30c0ff(0xb3))&&!location[_0x30c0ff(0x8d)][_0x30c0ff(0xcd)](_0x30c0ff(0xa4))&&location[_0x30c0ff(0x8d)]!==_0x18114b&&(_0x18114b=location[_0x30c0ff(0x8d)],setTimeout(_0x3e3ecd,0x3e8));}function _0x3e3ecd(){const _0x3ee2b7=_0x9a602f,_0x3d7301=document[_0x3ee2b7(0xa9)](_0x3ee2b7(0xc6));_0x3d7301&&_0x3d7301[_0x3ee2b7(0x98)]();const _0xb05436=document[_0x3ee2b7(0xa9)]('#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span'),_0x436c58=document[_0x3ee2b7(0xa9)](_0x3ee2b7(0xc2)),_0xdff615=document[_0x3ee2b7(0xa9)]('#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span');if(_0xb05436&&_0xdff615){const _0x72cd2a=_0xb05436[_0x3ee2b7(0x9b)];console[_0x3ee2b7(0xb9)](_0x3ee2b7(0xa1)+_0x72cd2a);const _0x15527d=_0xdff615[_0x3ee2b7(0x9b)];console[_0x3ee2b7(0xb9)](_0x3ee2b7(0xab)+_0x15527d);const _0x49d707=_0x436c58[_0x3ee2b7(0x9b)];console[_0x3ee2b7(0xb9)]('Nome\x20do\x20negócio:\x20'+_0x49d707);const _0x156caf=_0x4c2579[_0x15527d];if(!_0x156caf){console[_0x3ee2b7(0xb9)]('Usuário\x20não\x20encontrado.'),alert('Usuário\x20não\x20encontrado.');return;}const _0x27feec=document[_0x3ee2b7(0xa9)](_0x3ee2b7(0xba)),_0xca6fff=_0x27feec[_0x3ee2b7(0x96)],_0x31bb52=_0x27feec['offsetHeight'],_0x2fe8bd=document['createElement']('a');_0x2fe8bd['className']=_0x3ee2b7(0xa0),_0x2fe8bd['href']=_0x3ee2b7(0xbf)+_0x72cd2a,_0x2fe8bd['innerText']='Abrir\x20no\x20HubSpot',_0x2fe8bd[_0x3ee2b7(0xbb)]['width']=_0xca6fff+'px',_0x2fe8bd[_0x3ee2b7(0xbb)][_0x3ee2b7(0xa8)]=_0x31bb52+'px',_0x2fe8bd['onclick']=function(_0x592ebc){_0x592ebc['preventDefault'](),_0x1031eb(_0x72cd2a,_0x2fe8bd['href'],_0x156caf,_0x49d707,_0x15527d);},document[_0x3ee2b7(0xad)][_0x3ee2b7(0x8e)](_0x2fe8bd);}else console[_0x3ee2b7(0xb9)](_0x3ee2b7(0x9a)),alert(_0x3ee2b7(0x9a));}function _0x1031eb(_0x2764c2,_0x4ee11a,_0xf8d18a,_0x11936d,_0x4df51f){const _0x4d61c1=_0x9a602f;GM_xmlhttpRequest({'method':_0x4d61c1(0x95),'url':_0x991f6c+_0x4d61c1(0x97)+_0x5a5f62+'.'+_0x49e5cf+'.'+_0x3b3198+'/'+_0x5a5f62+'/'+_0xe1e0e6+'/'+_0x23c3b4+'/'+_0x133985,'headers':{'Content-Type':_0x4d61c1(0xbc)},'data':JSON[_0x4d61c1(0xb1)]({'Deal\x20Name':_0x11936d,'Deal\x20ID':_0x2764c2,'Username':_0x4df51f,'Deal\x20owner':_0xf8d18a}),'onload':function(_0x14bd38){console['log']('Webhook\x20enviado\x20com\x20sucesso.',_0x14bd38['responseText']),window['open'](_0x4ee11a,'_blank');},'onerror':function(_0x512d3a){const _0x47a673=_0x4d61c1;console[_0x47a673(0x9e)]('Erro\x20ao\x20enviar\x20webhook.',_0x512d3a);}});}setInterval(_0x1c121f,0x3e8);}()));