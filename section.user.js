// ==UserScript==
// @name         Octadesk to Hubspot
// @author       Caio Rodrigo
// @version      v3.5
// @run-at       document-end
// @run-at       document-idle
// @grant        GM_addStyle
// @grant        GM_xmlhttpRequest
// @namespace    https://app.octadesk.com/
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @updateURL    https://github.com/investbank/octadesk/main/section.user.js
// @downloadURL  https://raw.githubusercontent.com/investbank/octadesk/main/section.user.js
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// ==/UserScript==

function a0_0x16ae(_0x629b9d,_0x38b1c4){const _0x1138b4=a0_0x1138();return a0_0x16ae=function(_0x16ae2e,_0x1436c1){_0x16ae2e=_0x16ae2e-0x89;let _0x12ccda=_0x1138b4[_0x16ae2e];return _0x12ccda;},a0_0x16ae(_0x629b9d,_0x38b1c4);}(function(_0x23f006,_0x1b415c){const _0x3fdf54=a0_0x16ae,_0xcf3fb2=_0x23f006();while(!![]){try{const _0x2678da=-parseInt(_0x3fdf54(0xb1))/0x1*(parseInt(_0x3fdf54(0x94))/0x2)+-parseInt(_0x3fdf54(0xbf))/0x3*(parseInt(_0x3fdf54(0xcd))/0x4)+-parseInt(_0x3fdf54(0xa4))/0x5*(parseInt(_0x3fdf54(0xa9))/0x6)+-parseInt(_0x3fdf54(0xc3))/0x7+-parseInt(_0x3fdf54(0xc4))/0x8+parseInt(_0x3fdf54(0xd0))/0x9+parseInt(_0x3fdf54(0xd1))/0xa*(parseInt(_0x3fdf54(0xac))/0xb);if(_0x2678da===_0x1b415c)break;else _0xcf3fb2['push'](_0xcf3fb2['shift']());}catch(_0x10a17c){_0xcf3fb2['push'](_0xcf3fb2['shift']());}}}(a0_0x1138,0xd76af),(function(){'use strict';const _0x3cb049=a0_0x16ae;GM_addStyle(_0x3cb049(0x98));const _0x4eb86b={'Caio\x20Rodrigo':_0x3cb049(0xa7),'Cintia\x20França':_0x3cb049(0xae),'Jane\x20Silva':_0x3cb049(0x91),'Jeverson\x20Leal':_0x3cb049(0xa6),'Diego\x20Mota':'224534171','Luna\x20Rodrigues':_0x3cb049(0x9b),'Julio\x20Cezar':_0x3cb049(0xbd),'Beatriz\x20Vitoria':_0x3cb049(0x93),'Raquel\x20Andressa':_0x3cb049(0xb6),'Thalia\x20Sousa':'416784450','Thiago\x20Keiki':'448802705','Vinicius\x20Antunes':_0x3cb049(0x8b),'Maria\x20Clara':_0x3cb049(0x92),'Leandro\x20Soares':_0x3cb049(0x95),'Loara\x20Mikelly':_0x3cb049(0xc1),'Maria\x20Barreto':_0x3cb049(0x8c),'Lucas\x20Ruotolo':'521418344','Rosimeire\x20Pereira':_0x3cb049(0xaf),'Jonathan\x20Rodrigues':_0x3cb049(0x8d),'Mariana\x20Bergara':_0x3cb049(0xc0),'Carlos\x20Henrique':'592619104','Beatriz\x20Menezes':_0x3cb049(0xc8),'Alef\x20Rodrigues':'627397232','Matheus\x20Gomes':_0x3cb049(0x8a),'Barbara\x20Vieira':'639891100','Thalyta\x20Ramos':_0x3cb049(0x97),'Igor\x20Gomes':_0x3cb049(0x9d),'Paloma\x20Caramelo':_0x3cb049(0xbe),'Murilo\x20Nogueira':_0x3cb049(0x8f),'Othavio\x20Cordeiro':_0x3cb049(0xc6),'Natalia\x20Betti':'694540914','Rafael\x20Spanopoulos':_0x3cb049(0xca),'Yago\x20Fagundes':_0x3cb049(0xc9),'Mariana\x20Mendonça':_0x3cb049(0xa8),'Gabriel\x20Leite':_0x3cb049(0x9e)},_0x12b5ee=_0x3cb049(0xa3),_0x373d85=_0x3cb049(0xa1),_0x5e600d='zapier',_0x1439a5='com',_0x11dc2a=_0x3cb049(0xaa),_0x1408d9='11483048',_0x5aa7a5=_0x3cb049(0xb9);let _0x239025=location[_0x3cb049(0xce)];function _0xde370f(){const _0x55e4e2=_0x3cb049;location[_0x55e4e2(0xce)][_0x55e4e2(0xb5)](_0x55e4e2(0xa2))&&!location[_0x55e4e2(0xce)][_0x55e4e2(0xb5)](_0x55e4e2(0xa5))&&location[_0x55e4e2(0xce)]!==_0x239025&&(_0x239025=location['href'],setTimeout(_0x472294,0x3e8));}function _0x472294(){const _0x3685e6=_0x3cb049,_0x584e10=document[_0x3685e6(0xbc)]('a.hubspot-button');_0x584e10&&_0x584e10['remove']();const _0x30e04a=document[_0x3685e6(0xbc)](_0x3685e6(0xd3)),_0x53fb0a=document[_0x3685e6(0xbc)](_0x3685e6(0xb2)),_0x1e5f25=document[_0x3685e6(0xbc)](_0x3685e6(0xba));if(_0x30e04a&&_0x1e5f25){const _0x30e7ad=_0x30e04a[_0x3685e6(0xad)];console[_0x3685e6(0xd2)]('Deal\x20ID:\x20'+_0x30e7ad);const _0x4cec43=_0x1e5f25[_0x3685e6(0xad)];console[_0x3685e6(0xd2)]('Nome\x20de\x20usuário:\x20'+_0x4cec43);const _0x526f6e=_0x53fb0a['innerText'];console['log'](_0x3685e6(0x96)+_0x526f6e);const _0x48d17c=_0x4eb86b[_0x4cec43];if(!_0x48d17c){console['log']('Usuário\x20não\x20encontrado.'),alert('Usuário\x20não\x20encontrado.');return;}const _0x41891e=document[_0x3685e6(0xbc)](_0x3685e6(0xcc)),_0x465901=_0x41891e[_0x3685e6(0xbb)],_0x1d34e4=_0x41891e[_0x3685e6(0xa0)],_0x6aa30b=document[_0x3685e6(0x9c)]('a');_0x6aa30b[_0x3685e6(0xb0)]=_0x3685e6(0xc2),_0x6aa30b[_0x3685e6(0xce)]=_0x3685e6(0x8e)+_0x30e7ad,_0x6aa30b[_0x3685e6(0xad)]=_0x3685e6(0xb7),_0x6aa30b[_0x3685e6(0xb4)][_0x3685e6(0x9a)]=_0x465901+'px',_0x6aa30b[_0x3685e6(0xb4)][_0x3685e6(0xd4)]=_0x1d34e4+'px',_0x6aa30b[_0x3685e6(0xab)]=function(_0x298e99){_0x298e99['preventDefault'](),_0x115778(_0x30e7ad,_0x6aa30b['href'],_0x48d17c,_0x526f6e,_0x4cec43);},document['body']['appendChild'](_0x6aa30b);}else console[_0x3685e6(0xd2)](_0x3685e6(0xb8)),alert(_0x3685e6(0xb8));}function _0x115778(_0x1c6488,_0x122ef4,_0xa1c05d,_0x5e1a33,_0x4d9d53){const _0x6b19f5=_0x3cb049;GM_xmlhttpRequest({'method':_0x6b19f5(0xb3),'url':_0x12b5ee+_0x6b19f5(0x9f)+_0x373d85+'.'+_0x5e600d+'.'+_0x1439a5+'/'+_0x373d85+'/'+_0x11dc2a+'/'+_0x1408d9+'/'+_0x5aa7a5,'headers':{'Content-Type':_0x6b19f5(0xc5)},'data':JSON[_0x6b19f5(0x89)]({'Deal\x20Name':_0x5e1a33,'Deal\x20ID':_0x1c6488,'Username':_0x4d9d53,'Deal\x20owner':_0xa1c05d}),'onload':function(_0x4adf0d){const _0x177b51=_0x6b19f5;console[_0x177b51(0xd2)](_0x177b51(0x90),_0x4adf0d[_0x177b51(0x99)]),window[_0x177b51(0xcf)](_0x122ef4,'_blank');},'onerror':function(_0x4f3303){const _0x401811=_0x6b19f5;console[_0x401811(0xcb)](_0x401811(0xc7),_0x4f3303);}});}setInterval(_0xde370f,0x3e8);}()));function a0_0x1138(){const _0x434760=['error','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)','8vTStEu','href','open','4134492wDIAEO','40uBJRKz','log','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','height','stringify','635901253','466263204','497313796','537759574','https://app.hubspot.com/contacts/5867570/record/0-3/','684130698','Webhook\x20enviado\x20com\x20sucesso.','123577470','468809336','402277167','618716KDCeYT','482278797','Nome\x20do\x20negócio:\x20','645970052','a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}','responseText','width','260593552','createElement','654036494','722364735','://','offsetHeight','hooks','/chat/','https','10ofpifA','/chat/empty','210548907','36711165','711822417','4561800YsJBaJ','catch','onclick','20914179WvcPQd','innerText','121318700','536328832','className','4MyqLIl','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','POST','style','includes','416784447','Abrir\x20no\x20HubSpot','Hubspot\x20ID\x20não\x20encontrado.','3l74oda','#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span','offsetWidth','querySelector','402134392','664278537','1683273RLxyCm','587785904','490662201','hubspot-button','11988508qoLQQc','12714680AqcXNd','application/json','689176995','Erro\x20ao\x20enviar\x20webhook.','602381622','710142215','703998366'];a0_0x1138=function(){return _0x434760;};return a0_0x1138();}