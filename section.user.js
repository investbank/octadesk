// ==UserScript==
// @name         Octadesk to Hubspot
// @author       Caio Rodrigo
// @version      v3.3
// @run-at       document-end
// @run-at       document-idle
// @grant        GM_addStyle
// @grant        GM_xmlhttpRequest
// @namespace    https://app.octadesk.com/
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @updateURL    https://github.com/investbank/octadesk/main/section.user.js
// @downloadURL  https://raw.githubusercontent.com/investbank/octadesk/main/section.user.js
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// ==/UserScript==

function a0_0x1eb3(_0x108062,_0x7427cb){const _0x536e07=a0_0x536e();return a0_0x1eb3=function(_0x1eb308,_0x515326){_0x1eb308=_0x1eb308-0x1a3;let _0x19cbfe=_0x536e07[_0x1eb308];return _0x19cbfe;},a0_0x1eb3(_0x108062,_0x7427cb);}function a0_0x536e(){const _0x431ff1=['639891100','Usuário\x20não\x20encontrado.','width','remove','448802705','497313796','592619104','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','offsetHeight','querySelector','Abrir\x20no\x20HubSpot','a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}','_blank','#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span','537759574','664278537','36711165','217932eviRMK','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)','654036494','587785904','https://app.hubspot.com/contacts/5867570/record/0-3/','635901253','error','684130698','645970052','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','703998366','/chat/empty','Deal\x20ID:\x20','710142215','Webhook\x20enviado\x20com\x20sucesso.','Nome\x20do\x20negócio:\x20','Nome\x20de\x20usuário:\x20','416784447','11483048','preventDefault','href','hooks','https','36DJMANN','innerText','468809336','260593552','694540914','602381622','POST','offsetWidth','responseText','3l74oda','application/json','482278797','stringify','catch','className','com','style','6961416SVFAQI','402277167','1145746RvWsxV','416784450','includes','411288xgBFms','/chat/','490662201','224534171','://','627397232','112155DiYqmU','1838274xcxdjh','729386daaooY','open','log','536328832','689176995'];a0_0x536e=function(){return _0x431ff1;};return a0_0x536e();}(function(_0x409aad,_0x2959f9){const _0x355704=a0_0x1eb3,_0x25ba77=_0x409aad();while(!![]){try{const _0x17246a=parseInt(_0x355704(0x1de))/0x1+parseInt(_0x355704(0x1c8))/0x2+parseInt(_0x355704(0x1c0))/0x3+parseInt(_0x355704(0x1aa))/0x4*(parseInt(_0x355704(0x1c6))/0x5)+parseInt(_0x355704(0x1c7))/0x6+-parseInt(_0x355704(0x1bd))/0x7+-parseInt(_0x355704(0x1bb))/0x8;if(_0x17246a===_0x2959f9)break;else _0x25ba77['push'](_0x25ba77['shift']());}catch(_0x31455b){_0x25ba77['push'](_0x25ba77['shift']());}}}(a0_0x536e,0x2f64c),(function(){'use strict';const _0x11228b=a0_0x1eb3;GM_addStyle(_0x11228b(0x1d8));const _0x5edae4={'Caio\x20Rodrigo':_0x11228b(0x1dd),'Cintia\x20França':'121318700','Jane\x20Silva':'123577470','Jeverson\x20Leal':'210548907','Diego\x20Mota':_0x11228b(0x1c3),'Luna\x20Rodrigues':_0x11228b(0x1ad),'Julio\x20Cezar':'402134392','Beatriz\x20Vitoria':_0x11228b(0x1bc),'Raquel\x20Andressa':_0x11228b(0x1a4),'Thalia\x20Sousa':_0x11228b(0x1be),'Thiago\x20Keiki':_0x11228b(0x1d1),'Vinicius\x20Antunes':'466263204','Maria\x20Clara':_0x11228b(0x1ac),'Leandro\x20Soares':_0x11228b(0x1b5),'Loara\x20Mikelly':_0x11228b(0x1c2),'Maria\x20Barreto':_0x11228b(0x1d2),'Lucas\x20Ruotolo':'521418344','Rosimeire\x20Pereira':_0x11228b(0x1cb),'Jonathan\x20Rodrigues':_0x11228b(0x1db),'Mariana\x20Bergara':_0x11228b(0x1e1),'Carlos\x20Henrique':_0x11228b(0x1d3),'Beatriz\x20Menezes':_0x11228b(0x1af),'Alef\x20Rodrigues':_0x11228b(0x1c5),'Matheus\x20Gomes':_0x11228b(0x1e3),'Barbara\x20Vieira':_0x11228b(0x1cd),'Thalyta\x20Ramos':_0x11228b(0x1e6),'Igor\x20Gomes':_0x11228b(0x1e0),'Paloma\x20Caramelo':_0x11228b(0x1dc),'Murilo\x20Nogueira':_0x11228b(0x1e5),'Othavio\x20Cordeiro':_0x11228b(0x1cc),'Natalia\x20Betti':_0x11228b(0x1ae),'Rafael\x20Spanopoulos':_0x11228b(0x1e8),'Yago\x20Fagundes':_0x11228b(0x1eb),'Mariana\x20Mendonça':'711822417','Gabriel\x20Leite':'722364735'},_0x568693=_0x11228b(0x1a9),_0x1ae35c=_0x11228b(0x1a8),_0x5ede28='zapier',_0x1c9944=_0x11228b(0x1b9),_0x42c6ab=_0x11228b(0x1b7),_0x50bfaa=_0x11228b(0x1a5),_0x51a833=_0x11228b(0x1b3);let _0x50fd90=location[_0x11228b(0x1a7)];function _0x3a50eb(){const _0x44ca11=_0x11228b;location[_0x44ca11(0x1a7)][_0x44ca11(0x1bf)](_0x44ca11(0x1c1))&&!location[_0x44ca11(0x1a7)][_0x44ca11(0x1bf)](_0x44ca11(0x1e9))&&location[_0x44ca11(0x1a7)]!==_0x50fd90&&(_0x50fd90=location[_0x44ca11(0x1a7)],setTimeout(_0x1dedca,0x3e8));}function _0x1dedca(){const _0x3bd1bb=_0x11228b,_0x14cd66=document['querySelector']('a.hubspot-button');_0x14cd66&&_0x14cd66[_0x3bd1bb(0x1d0)]();const _0x4fc2a0=document[_0x3bd1bb(0x1d6)](_0x3bd1bb(0x1d4)),_0xb546c2=document[_0x3bd1bb(0x1d6)](_0x3bd1bb(0x1e7)),_0x26f3cc=document[_0x3bd1bb(0x1d6)](_0x3bd1bb(0x1da));if(_0x4fc2a0&&_0x26f3cc){const _0x98deb2=_0x4fc2a0['innerText'];console[_0x3bd1bb(0x1ca)](_0x3bd1bb(0x1ea)+_0x98deb2);const _0xd94dbb=_0x26f3cc[_0x3bd1bb(0x1ab)];console['log'](_0x3bd1bb(0x1a3)+_0xd94dbb);const _0x1d659a=_0xb546c2[_0x3bd1bb(0x1ab)];console['log'](_0x3bd1bb(0x1ed)+_0x1d659a);const _0x4c71b0=_0x5edae4[_0xd94dbb];if(!_0x4c71b0){console[_0x3bd1bb(0x1ca)](_0x3bd1bb(0x1ce)),alert(_0x3bd1bb(0x1ce));return;}const _0x3ea7db=document[_0x3bd1bb(0x1d6)](_0x3bd1bb(0x1df)),_0x333dbd=_0x3ea7db[_0x3bd1bb(0x1b1)],_0x26e1d6=_0x3ea7db[_0x3bd1bb(0x1d5)],_0x1446fc=document['createElement']('a');_0x1446fc[_0x3bd1bb(0x1b8)]='hubspot-button',_0x1446fc['href']=_0x3bd1bb(0x1e2)+_0x98deb2,_0x1446fc[_0x3bd1bb(0x1ab)]=_0x3bd1bb(0x1d7),_0x1446fc[_0x3bd1bb(0x1ba)][_0x3bd1bb(0x1cf)]=_0x333dbd+'px',_0x1446fc[_0x3bd1bb(0x1ba)]['height']=_0x26e1d6+'px',_0x1446fc['onclick']=function(_0x509e57){const _0x470200=_0x3bd1bb;_0x509e57[_0x470200(0x1a6)](),_0x352450(_0x98deb2,_0x1446fc[_0x470200(0x1a7)],_0x4c71b0,_0x1d659a,_0xd94dbb);},document['body']['appendChild'](_0x1446fc);}else console[_0x3bd1bb(0x1ca)]('Hubspot\x20ID\x20não\x20encontrado.'),alert('Hubspot\x20ID\x20não\x20encontrado.');}function _0x352450(_0x37c403,_0x24e56c,_0x588b26,_0xb0a002,_0xe22dc0){const _0x4fa3d3=_0x11228b;GM_xmlhttpRequest({'method':_0x4fa3d3(0x1b0),'url':_0x568693+_0x4fa3d3(0x1c4)+_0x1ae35c+'.'+_0x5ede28+'.'+_0x1c9944+'/'+_0x1ae35c+'/'+_0x42c6ab+'/'+_0x50bfaa+'/'+_0x51a833,'headers':{'Content-Type':_0x4fa3d3(0x1b4)},'data':JSON[_0x4fa3d3(0x1b6)]({'Deal\x20Name':_0xb0a002,'Deal\x20ID':_0x37c403,'Username':_0xe22dc0,'Deal\x20owner':_0x588b26}),'onload':function(_0x31743b){const _0x3f67c3=_0x4fa3d3;console[_0x3f67c3(0x1ca)](_0x3f67c3(0x1ec),_0x31743b[_0x3f67c3(0x1b2)]),window[_0x3f67c3(0x1c9)](_0x24e56c,_0x3f67c3(0x1d9));},'onerror':function(_0x2d7dde){const _0x24987d=_0x4fa3d3;console[_0x24987d(0x1e4)]('Erro\x20ao\x20enviar\x20webhook.',_0x2d7dde);}});}setInterval(_0x3a50eb,0x3e8);}()));