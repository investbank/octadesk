// ==UserScript==
// @name         Octadesk to Hubspot
// @author       Caio Rodrigo
// @version      v3.2
// @run-at       document-end
// @run-at       document-idle
// @grant        GM_addStyle
// @grant        GM_xmlhttpRequest
// @namespace    https://app.octadesk.com/
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @updateURL    https://github.com/investbank/octadesk/main/section.user.js
// @downloadURL  https://raw.githubusercontent.com/investbank/octadesk/main/section.user.js
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// ==/UserScript==

function a0_0x5930(_0x2e7bac,_0x452260){const _0xdee914=a0_0xdee9();return a0_0x5930=function(_0x59303d,_0x35a5c9){_0x59303d=_0x59303d-0x1cc;let _0x42236f=_0xdee914[_0x59303d];return _0x42236f;},a0_0x5930(_0x2e7bac,_0x452260);}function a0_0xdee9(){const _0x38940c=['responseText','com','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','689176995','1122268NdpVue','3l74oda','preventDefault','654036494','Erro\x20ao\x20enviar\x20webhook.','body','querySelector','remove','639891100','44630VOpMLV','710142215','537759574','a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}','402134392','offsetWidth','536328832','210548907','open','hubspot-button','11483048','Nome\x20do\x20negócio:\x20','zapier','10433944vyHUiS','99qKrfon','587785904','482278797','Deal\x20ID:\x20','416784450','635901253','href','Usuário\x20não\x20encontrado.','https://app.hubspot.com/contacts/5867570/record/0-3/','className','490662201','627397232','224534171','://','684130698','3PWLNvw','468809336','483wLeTGl','_blank','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','style','703998366','416784447','448802705','a.hubspot-button','innerText','722364735','298526gPUDhW','2731938uZtHfS','664278537','width','260593552','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)','53478NpOtiP','645970052','Hubspot\x20ID\x20não\x20encontrado.','121318700','onclick','height','602381622','includes','711822417','Webhook\x20enviado\x20com\x20sucesso.','error','Nome\x20de\x20usuário:\x20','log','592619104','Abrir\x20no\x20HubSpot','1966885dfLxeM','stringify','521418344'];a0_0xdee9=function(){return _0x38940c;};return a0_0xdee9();}(function(_0x11ace2,_0x370b37){const _0x321c60=a0_0x5930,_0x293e6a=_0x11ace2();while(!![]){try{const _0x3f740b=-parseInt(_0x321c60(0x1dc))/0x1+-parseInt(_0x321c60(0x1dd))/0x2+-parseInt(_0x321c60(0x1d0))/0x3*(-parseInt(_0x321c60(0x1f8))/0x4)+parseInt(_0x321c60(0x1f1))/0x5+-parseInt(_0x321c60(0x1e2))/0x6*(-parseInt(_0x321c60(0x1d2))/0x7)+parseInt(_0x321c60(0x20e))/0x8+-parseInt(_0x321c60(0x20f))/0x9*(parseInt(_0x321c60(0x201))/0xa);if(_0x3f740b===_0x370b37)break;else _0x293e6a['push'](_0x293e6a['shift']());}catch(_0x4b681d){_0x293e6a['push'](_0x293e6a['shift']());}}}(a0_0xdee9,0xd6bec),(function(){'use strict';const _0x522d52=a0_0x5930;GM_addStyle(_0x522d52(0x204));const _0x5449fd={'Caio\x20Rodrigo':'36711165','Cintia\x20França':_0x522d52(0x1e5),'Jane\x20Silva':'123577470','Jeverson\x20Leal':_0x522d52(0x208),'Diego\x20Mota':_0x522d52(0x1cd),'Luna\x20Rodrigues':_0x522d52(0x1e0),'Julio\x20Cezar':_0x522d52(0x205),'Beatriz\x20Vitoria':'402277167','Raquel\x20Andressa':_0x522d52(0x1d7),'Thalia\x20Sousa':_0x522d52(0x213),'Thiago\x20Keiki':_0x522d52(0x1d8),'Vinicius\x20Antunes':'466263204','Maria\x20Clara':_0x522d52(0x1d1),'Leandro\x20Soares':_0x522d52(0x211),'Loara\x20Mikelly':_0x522d52(0x219),'Maria\x20Barreto':'497313796','Lucas\x20Ruotolo':_0x522d52(0x1f3),'Rosimeire\x20Pereira':_0x522d52(0x207),'Jonathan\x20Rodrigues':_0x522d52(0x203),'Mariana\x20Bergara':_0x522d52(0x210),'Carlos\x20Henrique':_0x522d52(0x1ef),'Beatriz\x20Menezes':_0x522d52(0x1e8),'Alef\x20Rodrigues':_0x522d52(0x1cc),'Matheus\x20Gomes':_0x522d52(0x214),'Barbara\x20Vieira':_0x522d52(0x200),'Thalyta\x20Ramos':_0x522d52(0x1e3),'Igor\x20Gomes':_0x522d52(0x1fb),'Paloma\x20Caramelo':_0x522d52(0x1de),'Murilo\x20Nogueira':_0x522d52(0x1cf),'Othavio\x20Cordeiro':_0x522d52(0x1f7),'Natalia\x20Betti':'694540914','Rafael\x20Spanopoulos':_0x522d52(0x1d6),'Yago\x20Fagundes':_0x522d52(0x202),'Mariana\x20Mendonça':_0x522d52(0x1ea),'Gabriel\x20Leite':_0x522d52(0x1db)},_0x42e829='https',_0x47d862='hooks',_0x1106cf=_0x522d52(0x20d),_0x88bff3=_0x522d52(0x1f5),_0x1b46c8='catch',_0x596b6d=_0x522d52(0x20b),_0x50e11f=_0x522d52(0x1f9);let _0x1c1d6e=location[_0x522d52(0x215)];function _0x4abc91(){const _0x5abe37=_0x522d52;location[_0x5abe37(0x215)][_0x5abe37(0x1e9)]('/chat/')&&!location[_0x5abe37(0x215)][_0x5abe37(0x1e9)]('/chat/empty')&&location[_0x5abe37(0x215)]!==_0x1c1d6e&&(_0x1c1d6e=location[_0x5abe37(0x215)],setTimeout(_0x5c7e90,0x3e8));}function _0x5c7e90(){const _0x13c5ba=_0x522d52,_0x485cf2=document[_0x13c5ba(0x1fe)](_0x13c5ba(0x1d9));_0x485cf2&&_0x485cf2[_0x13c5ba(0x1ff)]();const _0x162272=document[_0x13c5ba(0x1fe)](_0x13c5ba(0x1d4)),_0x3f748c=document['querySelector'](_0x13c5ba(0x1f6)),_0x37b39e=document[_0x13c5ba(0x1fe)]('#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span');if(_0x162272&&_0x37b39e){const _0x45595a=_0x162272[_0x13c5ba(0x1da)];console[_0x13c5ba(0x1ee)](_0x13c5ba(0x212)+_0x45595a);const _0x392341=_0x37b39e[_0x13c5ba(0x1da)];console[_0x13c5ba(0x1ee)](_0x13c5ba(0x1ed)+_0x392341);const _0x363b70=_0x3f748c[_0x13c5ba(0x1da)];console[_0x13c5ba(0x1ee)](_0x13c5ba(0x20c)+_0x363b70);const _0x25a084=_0x5449fd[_0x392341];if(!_0x25a084){console[_0x13c5ba(0x1ee)](_0x13c5ba(0x216)),alert(_0x13c5ba(0x216));return;}const _0xb56ce1=document[_0x13c5ba(0x1fe)](_0x13c5ba(0x1e1)),_0x6a8967=_0xb56ce1[_0x13c5ba(0x206)],_0x53e497=_0xb56ce1['offsetHeight'],_0x409e86=document['createElement']('a');_0x409e86[_0x13c5ba(0x218)]=_0x13c5ba(0x20a),_0x409e86['href']=_0x13c5ba(0x217)+_0x45595a,_0x409e86[_0x13c5ba(0x1da)]=_0x13c5ba(0x1f0),_0x409e86[_0x13c5ba(0x1d5)][_0x13c5ba(0x1df)]=_0x6a8967+'px',_0x409e86[_0x13c5ba(0x1d5)][_0x13c5ba(0x1e7)]=_0x53e497+'px',_0x409e86[_0x13c5ba(0x1e6)]=function(_0x231de8){const _0x1be993=_0x13c5ba;_0x231de8[_0x1be993(0x1fa)](),_0x2e8f33(_0x45595a,_0x409e86[_0x1be993(0x215)],_0x25a084,_0x363b70,_0x392341);},document[_0x13c5ba(0x1fd)]['appendChild'](_0x409e86);}else console[_0x13c5ba(0x1ee)](_0x13c5ba(0x1e4)),alert(_0x13c5ba(0x1e4));}function _0x2e8f33(_0x55be48,_0x348ccf,_0x1a9a2f,_0x1ebfb9,_0x179d88){const _0x365aae=_0x522d52;GM_xmlhttpRequest({'method':'POST','url':_0x42e829+_0x365aae(0x1ce)+_0x47d862+'.'+_0x1106cf+'.'+_0x88bff3+'/'+_0x47d862+'/'+_0x1b46c8+'/'+_0x596b6d+'/'+_0x50e11f,'headers':{'Content-Type':'application/json'},'data':JSON[_0x365aae(0x1f2)]({'Deal\x20Name':_0x1ebfb9,'Deal\x20ID':_0x55be48,'Username':_0x179d88,'Deal\x20owner':_0x1a9a2f}),'onload':function(_0x54dd1d){const _0x3692cb=_0x365aae;console[_0x3692cb(0x1ee)](_0x3692cb(0x1eb),_0x54dd1d[_0x3692cb(0x1f4)]),window[_0x3692cb(0x209)](_0x348ccf,_0x3692cb(0x1d3));},'onerror':function(_0x3f93fa){const _0x121d2b=_0x365aae;console[_0x121d2b(0x1ec)](_0x121d2b(0x1fc),_0x3f93fa);}});}setInterval(_0x4abc91,0x3e8);}()));