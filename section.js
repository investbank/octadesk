// ==UserScript==
// @name         Octadesk to Hubspot
// @namespace    hhttps://app.octadesk.com/
// @version      v4
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// @author       Caio Rodrigo
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @grant        GM_xmlhttpRequest
// @grant        GM_addStyle
// @updateURL    https://raw.githubusercontent.com/investbank/octadesk/main/section.js
// @downloadURL  https://cdn.jsdelivr.net/gh/investbank/octadesk@main/section.js
// ==/UserScript==

function a0_0x1502(_0x488665,_0xd1023f){const _0x5852af=a0_0x5852();return a0_0x1502=function(_0x15024e,_0x3f1768){_0x15024e=_0x15024e-0x80;let _0x4befd7=_0x5852af[_0x15024e];return _0x4befd7;},a0_0x1502(_0x488665,_0xd1023f);}function a0_0x5852(){const _0x318a97=['appendChild','592619104','://','stringify','703998366','14232EmGDdp','offsetWidth','121318700','11483048','466263204','684130698','Usuário\x20não\x20encontrado.','12082884lVYZts','3395980QczeBZ','hubspot-button','2055500SEilit','689176995','remove','a.hubspot-button','catch','9sEwLkJ','639891100','https://app.hubspot.com/contacts/5867570/record/0-3/','responseText','57UFPncG','2674KKuOtI','a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}','Abrir\x20no\x20HubSpot','https','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','innerText','521418344','includes','zapier','224534171','width','body','querySelector','#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span','className','error','536328832','468809336','482278797','href','654036494','_blank','694540914','3l74oda','createElement','onclick','587785904','Erro\x20ao\x20enviar\x20webhook.','POST','497313796','416784447','416784450','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)','height','hooks','/chat/','711472vXEALm','210548907','2BHcPTu','5193560lBROuY','style','627397232','Webhook\x20enviado\x20com\x20sucesso.','open','123577470','710142215','Elemento\x20do\x20ID\x20do\x20cliente\x20não\x20encontrado.','402134392','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','722364735','213836Vpibkp','log','260593552','448802705'];a0_0x5852=function(){return _0x318a97;};return a0_0x5852();}(function(_0x4eb583,_0x59c895){const _0x5b44c4=a0_0x1502,_0x25e612=_0x4eb583();while(!![]){try{const _0x3b8fee=-parseInt(_0x5b44c4(0xb2))/0x1*(parseInt(_0x5b44c4(0xb4))/0x2)+-parseInt(_0x5b44c4(0x8d))/0x3*(-parseInt(_0x5b44c4(0xc0))/0x4)+parseInt(_0x5b44c4(0x82))/0x5+parseInt(_0x5b44c4(0xc9))/0x6*(-parseInt(_0x5b44c4(0x8e))/0x7)+-parseInt(_0x5b44c4(0xb5))/0x8+-parseInt(_0x5b44c4(0x89))/0x9*(-parseInt(_0x5b44c4(0x84))/0xa)+parseInt(_0x5b44c4(0x81))/0xb;if(_0x3b8fee===_0x59c895)break;else _0x25e612['push'](_0x25e612['shift']());}catch(_0x529f8d){_0x25e612['push'](_0x25e612['shift']());}}}(a0_0x5852,0xb2bec),(function(){'use strict';const _0x339161=a0_0x1502;GM_addStyle(_0x339161(0x8f));const _0xd34fe2={'Caio\x20Rodrigo':'36711165','Cintia\x20França':_0x339161(0xcb),'Jane\x20Silva':_0x339161(0xba),'Jeverson\x20Leal':_0x339161(0xb3),'Diego\x20Mota':_0x339161(0x97),'Luna\x20Rodrigues':_0x339161(0xc2),'Julio\x20Cezar':_0x339161(0xbd),'Beatriz\x20Vitoria':'402277167','Raquel\x20Andressa':_0x339161(0xac),'Thalia\x20Sousa':_0x339161(0xad),'Thiago\x20Keiki':_0x339161(0xc3),'Vinicius\x20Antunes':_0x339161(0xcd),'Maria\x20Clara':_0x339161(0x9f),'Leandro\x20Soares':_0x339161(0xa0),'Loara\x20Mikelly':'490662201','Maria\x20Barreto':_0x339161(0xab),'Lucas\x20Ruotolo':_0x339161(0x94),'Rosimeire\x20Pereira':_0x339161(0x9e),'Jonathan\x20Rodrigues':'537759574','Mariana\x20Bergara':_0x339161(0xa8),'Carlos\x20Henrique':_0x339161(0xc5),'Beatriz\x20Menezes':'602381622','Alef\x20Rodrigues':_0x339161(0xb7),'Matheus\x20Gomes':'635901253','Barbara\x20Vieira':_0x339161(0x8a),'Thalyta\x20Ramos':'645970052','Igor\x20Gomes':_0x339161(0xa2),'Paloma\x20Caramelo':'664278537','Murilo\x20Nogueira':_0x339161(0xce),'Othavio\x20Cordeiro':_0x339161(0x85),'Natalia\x20Betti':_0x339161(0xa4),'Rafael\x20Spanopoulos':_0x339161(0xc8),'Yago\x20Fagundes':_0x339161(0xbb),'Mariana\x20Mendonça':'711822417','Gabriel\x20Leite':_0x339161(0xbf)},_0x3087d=_0x339161(0x91),_0x30dc4c=_0x339161(0xb0),_0x2e800f=_0x339161(0x96),_0x2d5bbb='com',_0x45c9e0=_0x339161(0x88),_0x59cbe2=_0x339161(0xcc),_0x2bc82f=_0x339161(0xa5);let _0x1d1e48=location[_0x339161(0xa1)];function _0x369250(){const _0x17b000=_0x339161;location['href'][_0x17b000(0x95)](_0x17b000(0xb1))&&!location[_0x17b000(0xa1)][_0x17b000(0x95)]('/chat/empty')&&location[_0x17b000(0xa1)]!==_0x1d1e48&&(_0x1d1e48=location[_0x17b000(0xa1)],setTimeout(_0x3f60f1,0x3e8));}function _0x3f60f1(){const _0x56435c=_0x339161,_0x1d42f9=document[_0x56435c(0x9a)](_0x56435c(0x87));_0x1d42f9&&_0x1d42f9[_0x56435c(0x86)]();const _0x2e0550=document['querySelector'](_0x56435c(0x92)),_0x2af626=document[_0x56435c(0x9a)](_0x56435c(0xbe)),_0x1cef7e=document[_0x56435c(0x9a)](_0x56435c(0x9b));if(_0x2e0550&&_0x1cef7e){const _0x4d49d1=_0x2e0550[_0x56435c(0x93)];console['log'](_0x4d49d1);const _0x27fc8f=_0x1cef7e[_0x56435c(0x93)];console[_0x56435c(0xc1)](_0x27fc8f);const _0x644820=_0x2af626[_0x56435c(0x93)];console['log'](_0x644820);const _0x452802=_0xd34fe2[_0x27fc8f];if(!_0x452802){console[_0x56435c(0xc1)](_0x56435c(0x80));return;}const _0x4fe06e=document[_0x56435c(0x9a)](_0x56435c(0xae)),_0x3e61cc=_0x4fe06e[_0x56435c(0xca)],_0x369a37=_0x4fe06e['offsetHeight'],_0x55134a=document[_0x56435c(0xa6)]('a');_0x55134a[_0x56435c(0x9c)]=_0x56435c(0x83),_0x55134a[_0x56435c(0xa1)]=_0x56435c(0x8b)+_0x4d49d1,_0x55134a[_0x56435c(0x93)]=_0x56435c(0x90),_0x55134a[_0x56435c(0xb6)][_0x56435c(0x98)]=_0x3e61cc+'px',_0x55134a[_0x56435c(0xb6)][_0x56435c(0xaf)]=_0x369a37+'px',_0x55134a[_0x56435c(0xa7)]=function(_0x35878e){const _0x459d42=_0x56435c;_0x35878e['preventDefault'](),_0x24eac7(_0x4d49d1,_0x55134a[_0x459d42(0xa1)],_0x452802,_0x644820,_0x27fc8f);},document[_0x56435c(0x99)][_0x56435c(0xc4)](_0x55134a);}else console[_0x56435c(0xc1)](_0x56435c(0xbc));}function _0x24eac7(_0x59c79c,_0x45f3c5,_0x39f87d,_0x42ea7b,_0x2547e5){const _0x58e039=_0x339161;GM_xmlhttpRequest({'method':_0x58e039(0xaa),'url':_0x3087d+_0x58e039(0xc6)+_0x30dc4c+'.'+_0x2e800f+'.'+_0x2d5bbb+'/'+_0x30dc4c+'/'+_0x45c9e0+'/'+_0x59cbe2+'/'+_0x2bc82f,'headers':{'Content-Type':'application/json'},'data':JSON[_0x58e039(0xc7)]({'Deal\x20Name':_0x42ea7b,'Deal\x20ID':_0x59c79c,'Username':_0x2547e5,'Deal\x20owner':_0x39f87d}),'onload':function(_0x456505){const _0x5671bd=_0x58e039;console['log'](_0x5671bd(0xb8),_0x456505[_0x5671bd(0x8c)]),window[_0x5671bd(0xb9)](_0x45f3c5,_0x5671bd(0xa3));},'onerror':function(_0x2f35ca){const _0x3c7c53=_0x58e039;console[_0x3c7c53(0x9d)](_0x3c7c53(0xa9),_0x2f35ca);}});}setInterval(_0x369250,0x3e8);}()));