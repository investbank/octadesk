// ==UserScript==
// @name         Octadesk to Hubspot
// @author       Caio Rodrigo
// @version      v3.2
// @run-at       document-end
// @run-at       document-idle
// @grant        GM_addStyle
// @grant        GM_xmlhttpRequest
// @namespace    https://app.octadesk.com/
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @downloadURL  https://cdn.jsdelivr.net/gh/investbank/octadesk@main/section.js
// @updateURL    https://raw.githubusercontent.com/investbank/octadesk/main/section.js
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// ==/UserScript==

function a0_0x28cf(){const _0x4f7e5b=['448802705','Deal\x20ID:\x20','style','zapier','a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}','204080lYFgya','Usuário\x20não\x20encontrado.','stringify','11483048','a.hubspot-button','397168MjnqJE','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','642435azscIj','hubspot-button','468809336','3048gZuMlK','querySelector','width','537759574','627397232','654036494','260593552','Abrir\x20no\x20HubSpot','application/json','644740oPybXJ','536328832','664278537','416784447','482278797','href','createElement','36711165','2286280yAmNdq','Erro\x20ao\x20enviar\x20webhook.','703998366','body','#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span','416784450','onclick','91PZwDVT','className','includes','Hubspot\x20ID\x20não\x20encontrado.','height','_blank','://','402277167','remove','711822417','https','Nome\x20de\x20usuário:\x20','72966pldbAa','com','innerText','preventDefault','497313796','9wYcyms','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)','offsetWidth','722364735','402134392','521418344','Webhook\x20enviado\x20com\x20sucesso.','224534171','catch','3l74oda','645970052','76yBiRMb','log','POST'];a0_0x28cf=function(){return _0x4f7e5b;};return a0_0x28cf();}function a0_0x349f(_0x54dc1f,_0x2932f7){const _0x28cf91=a0_0x28cf();return a0_0x349f=function(_0x349f5b,_0x44ceb0){_0x349f5b=_0x349f5b-0x10f;let _0x2f1a1a=_0x28cf91[_0x349f5b];return _0x2f1a1a;},a0_0x349f(_0x54dc1f,_0x2932f7);}(function(_0x122458,_0x5feee0){const _0x70e6f=a0_0x349f,_0x5cfe7f=_0x122458();while(!![]){try{const _0x141da7=-parseInt(_0x70e6f(0x140))/0x1+parseInt(_0x70e6f(0x138))/0x2*(parseInt(_0x70e6f(0x14a))/0x3)+parseInt(_0x70e6f(0x153))/0x4+parseInt(_0x70e6f(0x147))/0x5+-parseInt(_0x70e6f(0x128))/0x6*(-parseInt(_0x70e6f(0x11c))/0x7)+parseInt(_0x70e6f(0x145))/0x8*(parseInt(_0x70e6f(0x12d))/0x9)+-parseInt(_0x70e6f(0x115))/0xa;if(_0x141da7===_0x5feee0)break;else _0x5cfe7f['push'](_0x5cfe7f['shift']());}catch(_0x52d80e){_0x5cfe7f['push'](_0x5cfe7f['shift']());}}}(a0_0x28cf,0x1938f),(function(){'use strict';const _0x2609b0=a0_0x349f;GM_addStyle(_0x2609b0(0x13f));const _0x1bd542={'Caio\x20Rodrigo':_0x2609b0(0x114),'Cintia\x20França':'121318700','Jane\x20Silva':'123577470','Jeverson\x20Leal':'210548907','Diego\x20Mota':_0x2609b0(0x134),'Luna\x20Rodrigues':_0x2609b0(0x150),'Julio\x20Cezar':_0x2609b0(0x131),'Beatriz\x20Vitoria':_0x2609b0(0x123),'Raquel\x20Andressa':_0x2609b0(0x110),'Thalia\x20Sousa':_0x2609b0(0x11a),'Thiago\x20Keiki':_0x2609b0(0x13b),'Vinicius\x20Antunes':'466263204','Maria\x20Clara':_0x2609b0(0x149),'Leandro\x20Soares':_0x2609b0(0x111),'Loara\x20Mikelly':'490662201','Maria\x20Barreto':_0x2609b0(0x12c),'Lucas\x20Ruotolo':_0x2609b0(0x132),'Rosimeire\x20Pereira':_0x2609b0(0x154),'Jonathan\x20Rodrigues':_0x2609b0(0x14d),'Mariana\x20Bergara':'587785904','Carlos\x20Henrique':'592619104','Beatriz\x20Menezes':'602381622','Alef\x20Rodrigues':_0x2609b0(0x14e),'Matheus\x20Gomes':'635901253','Barbara\x20Vieira':'639891100','Thalyta\x20Ramos':_0x2609b0(0x137),'Igor\x20Gomes':_0x2609b0(0x14f),'Paloma\x20Caramelo':_0x2609b0(0x10f),'Murilo\x20Nogueira':'684130698','Othavio\x20Cordeiro':'689176995','Natalia\x20Betti':'694540914','Rafael\x20Spanopoulos':_0x2609b0(0x117),'Yago\x20Fagundes':'710142215','Mariana\x20Mendonça':_0x2609b0(0x125),'Gabriel\x20Leite':_0x2609b0(0x130)},_0x52e504=_0x2609b0(0x126),_0x2bdb55='hooks',_0x2d3f50=_0x2609b0(0x13e),_0x450042=_0x2609b0(0x129),_0x731115=_0x2609b0(0x135),_0x132988=_0x2609b0(0x143),_0x183d69=_0x2609b0(0x136);let _0x35dbee=location['href'];function _0x346408(){const _0x51a9a9=_0x2609b0;location[_0x51a9a9(0x112)][_0x51a9a9(0x11e)]('/chat/')&&!location['href'][_0x51a9a9(0x11e)]('/chat/empty')&&location['href']!==_0x35dbee&&(_0x35dbee=location['href'],setTimeout(_0x5bf221,0x3e8));}function _0x5bf221(){const _0x4d00ab=_0x2609b0,_0x1693ca=document[_0x4d00ab(0x14b)](_0x4d00ab(0x144));_0x1693ca&&_0x1693ca[_0x4d00ab(0x124)]();const _0x14dea9=document[_0x4d00ab(0x14b)]('#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span'),_0x5684e8=document[_0x4d00ab(0x14b)](_0x4d00ab(0x146)),_0x26cac1=document[_0x4d00ab(0x14b)](_0x4d00ab(0x119));if(_0x14dea9&&_0x26cac1){const _0x6ffd50=_0x14dea9[_0x4d00ab(0x12a)];console[_0x4d00ab(0x139)](_0x4d00ab(0x13c)+_0x6ffd50);const _0x236191=_0x26cac1[_0x4d00ab(0x12a)];console[_0x4d00ab(0x139)](_0x4d00ab(0x127)+_0x236191);const _0x117999=_0x5684e8[_0x4d00ab(0x12a)];console[_0x4d00ab(0x139)]('Nome\x20do\x20negócio:\x20'+_0x117999);const _0x560a39=_0x1bd542[_0x236191];if(!_0x560a39){console['log']('Usuário\x20não\x20encontrado.'),alert(_0x4d00ab(0x141));return;}const _0xcf8d78=document['querySelector'](_0x4d00ab(0x12e)),_0x5cbf5d=_0xcf8d78[_0x4d00ab(0x12f)],_0x5c2ca7=_0xcf8d78['offsetHeight'],_0x1e799b=document[_0x4d00ab(0x113)]('a');_0x1e799b[_0x4d00ab(0x11d)]=_0x4d00ab(0x148),_0x1e799b[_0x4d00ab(0x112)]='https://app.hubspot.com/contacts/5867570/record/0-3/'+_0x6ffd50,_0x1e799b[_0x4d00ab(0x12a)]=_0x4d00ab(0x151),_0x1e799b[_0x4d00ab(0x13d)][_0x4d00ab(0x14c)]=_0x5cbf5d+'px',_0x1e799b['style'][_0x4d00ab(0x120)]=_0x5c2ca7+'px',_0x1e799b[_0x4d00ab(0x11b)]=function(_0x4423b5){const _0x2c2e8f=_0x4d00ab;_0x4423b5[_0x2c2e8f(0x12b)](),_0x179b9f(_0x6ffd50,_0x1e799b[_0x2c2e8f(0x112)],_0x560a39,_0x117999,_0x236191);},document[_0x4d00ab(0x118)]['appendChild'](_0x1e799b);}else console[_0x4d00ab(0x139)](_0x4d00ab(0x11f)),alert(_0x4d00ab(0x11f));}function _0x179b9f(_0xe4e12,_0x193e00,_0x52c222,_0x44a35f,_0x1328cf){const _0x21029e=_0x2609b0;GM_xmlhttpRequest({'method':_0x21029e(0x13a),'url':_0x52e504+_0x21029e(0x122)+_0x2bdb55+'.'+_0x2d3f50+'.'+_0x450042+'/'+_0x2bdb55+'/'+_0x731115+'/'+_0x132988+'/'+_0x183d69,'headers':{'Content-Type':_0x21029e(0x152)},'data':JSON[_0x21029e(0x142)]({'Deal\x20Name':_0x44a35f,'Deal\x20ID':_0xe4e12,'Username':_0x1328cf,'Deal\x20owner':_0x52c222}),'onload':function(_0x4d91f5){const _0x23e683=_0x21029e;console[_0x23e683(0x139)](_0x23e683(0x133),_0x4d91f5['responseText']),window['open'](_0x193e00,_0x23e683(0x121));},'onerror':function(_0x1994eb){const _0x4c5d81=_0x21029e;console['error'](_0x4c5d81(0x116),_0x1994eb);}});}setInterval(_0x346408,0x3e8);}()));