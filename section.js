// ==UserScript==
// @name         Octadesk to Hubspot
// @namespace    hhttps://app.octadesk.com/
// @version      v3
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// @author       Caio Rodrigo
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @grant        GM_xmlhttpRequest
// @grant        GM_addStyle
// ==/UserScript==

(function(_0x28fdbc,_0x35d8d5){const _0x4c6c09=a0_0x5652,_0x25bc3b=_0x28fdbc();while(!![]){try{const _0x5ef3f9=parseInt(_0x4c6c09(0x95))/0x1+-parseInt(_0x4c6c09(0x6e))/0x2+parseInt(_0x4c6c09(0x70))/0x3+parseInt(_0x4c6c09(0xab))/0x4*(-parseInt(_0x4c6c09(0xaa))/0x5)+-parseInt(_0x4c6c09(0x83))/0x6*(-parseInt(_0x4c6c09(0x9a))/0x7)+parseInt(_0x4c6c09(0xa3))/0x8*(parseInt(_0x4c6c09(0x76))/0x9)+-parseInt(_0x4c6c09(0x75))/0xa;if(_0x5ef3f9===_0x35d8d5)break;else _0x25bc3b['push'](_0x25bc3b['shift']());}catch(_0x32c508){_0x25bc3b['push'](_0x25bc3b['shift']());}}}(a0_0x5db2,0x2a923),(function(){'use strict';const _0x1c2364=a0_0x5652;GM_addStyle(_0x1c2364(0x9f));const _0x2a9b50={'Caio\x20Rodrigo':_0x1c2364(0x7e),'Cintia\x20França':_0x1c2364(0x8c),'Jane\x20Silva':_0x1c2364(0x99),'Jeverson\x20Leal':'210548907','Diego\x20Mota':_0x1c2364(0x6a),'Luna\x20Rodrigues':_0x1c2364(0x73),'Julio\x20Cezar':_0x1c2364(0xa9),'Beatriz\x20Vitoria':_0x1c2364(0x94),'Raquel\x20Andressa':_0x1c2364(0x84),'Thalia\x20Sousa':_0x1c2364(0x6f),'Thiago\x20Keiki':_0x1c2364(0xa7),'Vinicius\x20Antunes':_0x1c2364(0x79),'Maria\x20Clara':_0x1c2364(0x9d),'Leandro\x20Soares':_0x1c2364(0x85),'Loara\x20Mikelly':'490662201','Maria\x20Barreto':_0x1c2364(0xb0),'Lucas\x20Ruotolo':'521418344','Rosimeire\x20Pereira':_0x1c2364(0x82),'Jonathan\x20Rodrigues':_0x1c2364(0xa1),'Mariana\x20Bergara':'587785904','Carlos\x20Henrique':'592619104','Beatriz\x20Menezes':_0x1c2364(0x87),'Alef\x20Rodrigues':'627397232','Matheus\x20Gomes':_0x1c2364(0x6c),'Barbara\x20Vieira':_0x1c2364(0xad),'Thalyta\x20Ramos':_0x1c2364(0x89),'Igor\x20Gomes':_0x1c2364(0x7f),'Paloma\x20Caramelo':_0x1c2364(0x8f),'Murilo\x20Nogueira':_0x1c2364(0xa2),'Othavio\x20Cordeiro':_0x1c2364(0x90),'Natalia\x20Betti':_0x1c2364(0x71),'Rafael\x20Spanopoulos':_0x1c2364(0x81),'Yago\x20Fagundes':'710142215','Mariana\x20Mendonça':_0x1c2364(0x6d),'Gabriel\x20Leite':_0x1c2364(0x74)},_0x5eef26='https',_0x2cc9da=_0x1c2364(0x7b),_0x297cb2=_0x1c2364(0x92),_0x2001dd=_0x1c2364(0x7c),_0x48124a='catch',_0x8b3640='11483048',_0x40dbe8=_0x1c2364(0x8a);let _0x30d43a=location[_0x1c2364(0xb1)];function _0x30ca0d(){const _0x5c8b1f=_0x1c2364;location[_0x5c8b1f(0xb1)]['includes'](_0x5c8b1f(0x86))&&!location[_0x5c8b1f(0xb1)][_0x5c8b1f(0x91)](_0x5c8b1f(0xac))&&location[_0x5c8b1f(0xb1)]!==_0x30d43a&&(_0x30d43a=location['href'],setTimeout(_0x1b2838,0x3e8));}function _0x1b2838(){const _0x5024a1=_0x1c2364,_0x1eeb06=document[_0x5024a1(0xb2)]('a.hubspot-button');_0x1eeb06&&_0x1eeb06['remove']();const _0x3196a0=document[_0x5024a1(0xb2)](_0x5024a1(0x96)),_0x240a53=document['querySelector']('#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span'),_0x51d7c6=document['querySelector'](_0x5024a1(0xa6));if(_0x3196a0&&_0x51d7c6){const _0x4acb91=_0x3196a0[_0x5024a1(0x69)];console['log'](_0x4acb91);const _0x591d0d=_0x51d7c6[_0x5024a1(0x69)];console[_0x5024a1(0x88)](_0x591d0d);const _0x510006=_0x240a53[_0x5024a1(0x69)];console['log'](_0x510006);const _0x21b5bc=_0x2a9b50[_0x591d0d];if(!_0x21b5bc){console[_0x5024a1(0x88)](_0x5024a1(0x7d));return;}const _0x442dcf=document[_0x5024a1(0xb2)](_0x5024a1(0x93)),_0x2210b8=_0x442dcf[_0x5024a1(0x9c)],_0x37f357=_0x442dcf[_0x5024a1(0x72)],_0x4bc860=document[_0x5024a1(0x80)]('a');_0x4bc860[_0x5024a1(0xa0)]=_0x5024a1(0xa4),_0x4bc860[_0x5024a1(0xb1)]=_0x5024a1(0x9b)+_0x4acb91,_0x4bc860[_0x5024a1(0x69)]=_0x5024a1(0x6b),_0x4bc860[_0x5024a1(0x67)]['width']=_0x2210b8+'px',_0x4bc860[_0x5024a1(0x67)][_0x5024a1(0x9e)]=_0x37f357+'px',_0x4bc860['onclick']=function(_0x572029){const _0x578832=_0x5024a1;_0x572029[_0x578832(0xa5)](),_0x5b0425(_0x4acb91,_0x4bc860[_0x578832(0xb1)],_0x21b5bc,_0x510006,_0x591d0d);},document[_0x5024a1(0x97)][_0x5024a1(0x7a)](_0x4bc860);}else console['log'](_0x5024a1(0x8e));}function _0x5b0425(_0x20644d,_0x3feeda,_0x34a5d3,_0x46fe6e,_0x17cd09){const _0x3ef9dd=_0x1c2364;GM_xmlhttpRequest({'method':_0x3ef9dd(0x78),'url':_0x5eef26+_0x3ef9dd(0x8b)+_0x2cc9da+'.'+_0x297cb2+'.'+_0x2001dd+'/'+_0x2cc9da+'/'+_0x48124a+'/'+_0x8b3640+'/'+_0x40dbe8,'headers':{'Content-Type':_0x3ef9dd(0x8d)},'data':JSON[_0x3ef9dd(0x77)]({'Deal\x20Name':_0x46fe6e,'Deal\x20ID':_0x20644d,'Username':_0x17cd09,'Deal\x20owner':_0x34a5d3}),'onload':function(_0x110a4f){const _0x1c9e1e=_0x3ef9dd;console['log'](_0x1c9e1e(0xaf),_0x110a4f[_0x1c9e1e(0x98)]),window[_0x1c9e1e(0xae)](_0x3feeda,'_blank');},'onerror':function(_0x2d5d11){const _0x1b7868=_0x3ef9dd;console[_0x1b7868(0x68)](_0x1b7868(0xa8),_0x2d5d11);}});}setInterval(_0x30ca0d,0x3e8);}()));function a0_0x5652(_0x565673,_0x18fb5a){const _0x5db29c=a0_0x5db2();return a0_0x5652=function(_0x565281,_0xb1082b){_0x565281=_0x565281-0x67;let _0x470d4a=_0x5db29c[_0x565281];return _0x470d4a;},a0_0x5652(_0x565673,_0x18fb5a);}function a0_0x5db2(){const _0x23ee58=['123577470','189119aOPaen','https://app.hubspot.com/contacts/5867570/record/0-3/','offsetWidth','468809336','height','a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}','className','537759574','684130698','1163528zsFBUl','hubspot-button','preventDefault','#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span','448802705','Erro\x20ao\x20enviar\x20webhook.','402134392','65WqAWKr','65636wgjqBG','/chat/empty','639891100','open','Webhook\x20enviado\x20com\x20sucesso.','497313796','href','querySelector','style','error','innerText','224534171','Abrir\x20no\x20HubSpot','635901253','711822417','312806fVlHgI','416784450','1008522dzyHTv','694540914','offsetHeight','260593552','722364735','880970IwzIVp','9HYHRFI','stringify','POST','466263204','appendChild','hooks','com','Usuário\x20não\x20encontrado.','36711165','654036494','createElement','703998366','536328832','6WmKwAq','416784447','482278797','/chat/','602381622','log','645970052','3l74oda','://','121318700','application/json','Elemento\x20do\x20ID\x20do\x20cliente\x20não\x20encontrado.','664278537','689176995','includes','zapier','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)','402277167','123556oVUtFh','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','body','responseText'];a0_0x5db2=function(){return _0x23ee58;};return a0_0x5db2();}