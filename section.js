// ==UserScript==
// @name         Octadesk to Hubspot
// @author       Caio Rodrigo
// @version      v3.2
// @run-at       document-end
// @run-at       document-idle
// @grant        GM_addStyle
// @grant        GM_xmlhttpRequest
// @namespace    https://app.octadesk.com/
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @updateURL    https://github.com/investbank/octadesk/main/section.user.js
// @downloadURL  https://raw.githubusercontent.com/investbank/octadesk/main/section.user.js
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// ==/UserScript==

function a0_0x228d(_0x4c2f24,_0x159309){const _0x2fb8ad=a0_0x2fb8();return a0_0x228d=function(_0x228db9,_0x30e510){_0x228db9=_0x228db9-0xdd;let _0x254c01=_0x2fb8ad[_0x228db9];return _0x254c01;},a0_0x228d(_0x4c2f24,_0x159309);}function a0_0x2fb8(){const _0xf08b9c=['12162xvAWah','260593552','/chat/','11483048','a.hubspot-button','664278537','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)','open','210548907','querySelector','587785904','1515648CPrwvr','4esKyLM','error','offsetHeight','689176995','Deal\x20ID:\x20','innerText','536328832','744766SjVmfb','#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span','371rKFGOW','694540914','628281VkYiAF','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','application/json','110DPZgQT','stringify','2bmUNrP','zapier','645970052','Usuário\x20não\x20encontrado.','https','710142215','body','727011NGvxuX','121318700','://','Nome\x20de\x20usuário:\x20','635901253','includes','POST','/chat/empty','490662201','711822417','Hubspot\x20ID\x20não\x20encontrado.','_blank','466263204','448802705','123577470','468809336','offsetWidth','402134392','Erro\x20ao\x20enviar\x20webhook.','2707415HuWXNr','href','416784450','onclick','537759574','602381622','722364735','224534171','width','log','preventDefault','521418344','https://app.hubspot.com/contacts/5867570/record/0-3/','catch','5028485AcLqLy','497313796'];a0_0x2fb8=function(){return _0xf08b9c;};return a0_0x2fb8();}(function(_0x183f5e,_0xa33f2b){const _0x28d590=a0_0x228d,_0x33db5c=_0x183f5e();while(!![]){try{const _0x19aec7=parseInt(_0x28d590(0x117))/0x1+parseInt(_0x28d590(0x121))/0x2*(parseInt(_0x28d590(0xe1))/0x3)+-parseInt(_0x28d590(0x110))/0x4*(-parseInt(_0x28d590(0xf4))/0x5)+-parseInt(_0x28d590(0x104))/0x6*(parseInt(_0x28d590(0x119))/0x7)+parseInt(_0x28d590(0x10f))/0x8+parseInt(_0x28d590(0x11b))/0x9*(-parseInt(_0x28d590(0x11f))/0xa)+-parseInt(_0x28d590(0x102))/0xb;if(_0x19aec7===_0xa33f2b)break;else _0x33db5c['push'](_0x33db5c['shift']());}catch(_0x1f81a2){_0x33db5c['push'](_0x33db5c['shift']());}}}(a0_0x2fb8,0x5e229),(function(){'use strict';const _0xd274a8=a0_0x228d;GM_addStyle('a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}');const _0x1a140e={'Caio\x20Rodrigo':'36711165','Cintia\x20França':_0xd274a8(0xe2),'Jane\x20Silva':_0xd274a8(0xef),'Jeverson\x20Leal':_0xd274a8(0x10c),'Diego\x20Mota':_0xd274a8(0xfb),'Luna\x20Rodrigues':_0xd274a8(0x105),'Julio\x20Cezar':_0xd274a8(0xf2),'Beatriz\x20Vitoria':'402277167','Raquel\x20Andressa':'416784447','Thalia\x20Sousa':_0xd274a8(0xf6),'Thiago\x20Keiki':_0xd274a8(0xee),'Vinicius\x20Antunes':_0xd274a8(0xed),'Maria\x20Clara':_0xd274a8(0xf0),'Leandro\x20Soares':'482278797','Loara\x20Mikelly':_0xd274a8(0xe9),'Maria\x20Barreto':_0xd274a8(0x103),'Lucas\x20Ruotolo':_0xd274a8(0xff),'Rosimeire\x20Pereira':_0xd274a8(0x116),'Jonathan\x20Rodrigues':_0xd274a8(0xf8),'Mariana\x20Bergara':_0xd274a8(0x10e),'Carlos\x20Henrique':'592619104','Beatriz\x20Menezes':_0xd274a8(0xf9),'Alef\x20Rodrigues':'627397232','Matheus\x20Gomes':_0xd274a8(0xe5),'Barbara\x20Vieira':'639891100','Thalyta\x20Ramos':_0xd274a8(0x123),'Igor\x20Gomes':'654036494','Paloma\x20Caramelo':_0xd274a8(0x109),'Murilo\x20Nogueira':'684130698','Othavio\x20Cordeiro':_0xd274a8(0x113),'Natalia\x20Betti':_0xd274a8(0x11a),'Rafael\x20Spanopoulos':'703998366','Yago\x20Fagundes':_0xd274a8(0xdf),'Mariana\x20Mendonça':_0xd274a8(0xea),'Gabriel\x20Leite':_0xd274a8(0xfa)},_0x407bd6=_0xd274a8(0xde),_0x32a173='hooks',_0x52ad68=_0xd274a8(0x122),_0x37bb1c='com',_0x174a80=_0xd274a8(0x101),_0x55e978=_0xd274a8(0x107),_0x4beadd='3l74oda';let _0x46fa08=location[_0xd274a8(0xf5)];function _0x3ff670(){const _0x47ad61=_0xd274a8;location['href'][_0x47ad61(0xe6)](_0x47ad61(0x106))&&!location[_0x47ad61(0xf5)][_0x47ad61(0xe6)](_0x47ad61(0xe8))&&location[_0x47ad61(0xf5)]!==_0x46fa08&&(_0x46fa08=location[_0x47ad61(0xf5)],setTimeout(_0x186962,0x3e8));}function _0x186962(){const _0x249cba=_0xd274a8,_0x1a2216=document[_0x249cba(0x10d)](_0x249cba(0x108));_0x1a2216&&_0x1a2216['remove']();const _0x4b415e=document[_0x249cba(0x10d)](_0x249cba(0x11c)),_0x288c7f=document[_0x249cba(0x10d)](_0x249cba(0x11d)),_0x5aaacd=document[_0x249cba(0x10d)](_0x249cba(0x118));if(_0x4b415e&&_0x5aaacd){const _0x18caff=_0x4b415e[_0x249cba(0x115)];console[_0x249cba(0xfd)](_0x249cba(0x114)+_0x18caff);const _0x289f56=_0x5aaacd['innerText'];console[_0x249cba(0xfd)](_0x249cba(0xe4)+_0x289f56);const _0xde39f2=_0x288c7f[_0x249cba(0x115)];console[_0x249cba(0xfd)]('Nome\x20do\x20negócio:\x20'+_0xde39f2);const _0x4520fa=_0x1a140e[_0x289f56];if(!_0x4520fa){console[_0x249cba(0xfd)](_0x249cba(0xdd)),alert(_0x249cba(0xdd));return;}const _0x554179=document[_0x249cba(0x10d)](_0x249cba(0x10a)),_0x5493c2=_0x554179[_0x249cba(0xf1)],_0x51838e=_0x554179[_0x249cba(0x112)],_0x3e0380=document['createElement']('a');_0x3e0380['className']='hubspot-button',_0x3e0380[_0x249cba(0xf5)]=_0x249cba(0x100)+_0x18caff,_0x3e0380[_0x249cba(0x115)]='Abrir\x20no\x20HubSpot',_0x3e0380['style'][_0x249cba(0xfc)]=_0x5493c2+'px',_0x3e0380['style']['height']=_0x51838e+'px',_0x3e0380[_0x249cba(0xf7)]=function(_0x356ca9){const _0x2ae093=_0x249cba;_0x356ca9[_0x2ae093(0xfe)](),_0x4c32da(_0x18caff,_0x3e0380[_0x2ae093(0xf5)],_0x4520fa,_0xde39f2,_0x289f56);},document[_0x249cba(0xe0)]['appendChild'](_0x3e0380);}else console[_0x249cba(0xfd)](_0x249cba(0xeb)),alert(_0x249cba(0xeb));}function _0x4c32da(_0x212b25,_0x4f41d3,_0x486d4,_0x9e5e44,_0x482e5c){const _0x31c665=_0xd274a8;GM_xmlhttpRequest({'method':_0x31c665(0xe7),'url':_0x407bd6+_0x31c665(0xe3)+_0x32a173+'.'+_0x52ad68+'.'+_0x37bb1c+'/'+_0x32a173+'/'+_0x174a80+'/'+_0x55e978+'/'+_0x4beadd,'headers':{'Content-Type':_0x31c665(0x11e)},'data':JSON[_0x31c665(0x120)]({'Deal\x20Name':_0x9e5e44,'Deal\x20ID':_0x212b25,'Username':_0x482e5c,'Deal\x20owner':_0x486d4}),'onload':function(_0x2fa654){const _0x35a4f0=_0x31c665;console[_0x35a4f0(0xfd)]('Webhook\x20enviado\x20com\x20sucesso.',_0x2fa654['responseText']),window[_0x35a4f0(0x10b)](_0x4f41d3,_0x35a4f0(0xec));},'onerror':function(_0x9786b8){const _0x1137d2=_0x31c665;console[_0x1137d2(0x111)](_0x1137d2(0xf3),_0x9786b8);}});}setInterval(_0x3ff670,0x3e8);}()));