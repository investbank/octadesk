// ==UserScript==
// @name         Octadesk to Hubspot
// @author       Caio Rodrigo
// @version      v3.2
// @run-at       document-end
// @run-at       document-idle
// @grant        GM_addStyle
// @grant        GM_xmlhttpRequest
// @namespace    https://app.octadesk.com/
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @updateURL    https://github.com/investbank/octadesk/main/section.user.js
// @downloadURL  https://raw.githubusercontent.com/investbank/octadesk/main/section.user.js
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// ==/UserScript==

function a0_0x1a66(_0x2a79d1,_0x4f0209){const _0x4966eb=a0_0x4966();return a0_0x1a66=function(_0x1a664b,_0x120deb){_0x1a664b=_0x1a664b-0x13e;let _0x482f64=_0x4966eb[_0x1a664b];return _0x482f64;},a0_0x1a66(_0x2a79d1,_0x4f0209);}function a0_0x4966(){const _0x395669=['3402987qGCaQx','645970052','_blank','592619104','639891100','createElement','567924chfNKc','536328832','224534171','402134392','256wldxdA','18rlSZFa','Webhook\x20enviado\x20com\x20sucesso.','remove','Usuário\x20não\x20encontrado.','Hubspot\x20ID\x20não\x20encontrado.','121318700','722364735','com','innerText','hubspot-button','/chat/empty','521418344','offsetHeight','width','Nome\x20de\x20usuário:\x20','654036494','1914ZHxwNz','log','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','684130698','://','537759574','703998366','onclick','Abrir\x20no\x20HubSpot','querySelector','8fnAKXM','587785904','468809336','2413504aaroGq','#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','href','preventDefault','a.hubspot-button','3l74oda','12766890KZgvjR','482278797','133850kOwwmG','catch','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)','1110920sEXUCF','error','responseText','210548907','Erro\x20ao\x20enviar\x20webhook.','466263204','Deal\x20ID:\x20','11483048','includes','a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}','Nome\x20do\x20negócio:\x20','635901253','710142215','stringify','490662201','open','689176995','497313796','416784447','application/json'];a0_0x4966=function(){return _0x395669;};return a0_0x4966();}(function(_0x165a92,_0x5cc307){const _0x2a7bb9=a0_0x1a66,_0x3d2315=_0x165a92();while(!![]){try{const _0x5a974b=parseInt(_0x2a7bb9(0x17d))/0x1+-parseInt(_0x2a7bb9(0x156))/0x2*(parseInt(_0x2a7bb9(0x167))/0x3)+parseInt(_0x2a7bb9(0x171))/0x4*(parseInt(_0x2a7bb9(0x180))/0x5)+parseInt(_0x2a7bb9(0x152))/0x6+parseInt(_0x2a7bb9(0x14c))/0x7+-parseInt(_0x2a7bb9(0x174))/0x8*(-parseInt(_0x2a7bb9(0x157))/0x9)+-parseInt(_0x2a7bb9(0x17b))/0xa;if(_0x5a974b===_0x5cc307)break;else _0x3d2315['push'](_0x3d2315['shift']());}catch(_0x1bd286){_0x3d2315['push'](_0x3d2315['shift']());}}}(a0_0x4966,0x62a44),(function(){'use strict';const _0x919e5=a0_0x1a66;GM_addStyle(_0x919e5(0x141));const _0x694e72={'Caio\x20Rodrigo':'36711165','Cintia\x20França':_0x919e5(0x15c),'Jane\x20Silva':'123577470','Jeverson\x20Leal':_0x919e5(0x183),'Diego\x20Mota':_0x919e5(0x154),'Luna\x20Rodrigues':'260593552','Julio\x20Cezar':_0x919e5(0x155),'Beatriz\x20Vitoria':'402277167','Raquel\x20Andressa':_0x919e5(0x14a),'Thalia\x20Sousa':'416784450','Thiago\x20Keiki':'448802705','Vinicius\x20Antunes':_0x919e5(0x185),'Maria\x20Clara':_0x919e5(0x173),'Leandro\x20Soares':_0x919e5(0x17c),'Loara\x20Mikelly':_0x919e5(0x146),'Maria\x20Barreto':_0x919e5(0x149),'Lucas\x20Ruotolo':_0x919e5(0x162),'Rosimeire\x20Pereira':_0x919e5(0x153),'Jonathan\x20Rodrigues':_0x919e5(0x16c),'Mariana\x20Bergara':_0x919e5(0x172),'Carlos\x20Henrique':_0x919e5(0x14f),'Beatriz\x20Menezes':'602381622','Alef\x20Rodrigues':'627397232','Matheus\x20Gomes':_0x919e5(0x143),'Barbara\x20Vieira':_0x919e5(0x150),'Thalyta\x20Ramos':_0x919e5(0x14d),'Igor\x20Gomes':_0x919e5(0x166),'Paloma\x20Caramelo':'664278537','Murilo\x20Nogueira':_0x919e5(0x16a),'Othavio\x20Cordeiro':_0x919e5(0x148),'Natalia\x20Betti':'694540914','Rafael\x20Spanopoulos':_0x919e5(0x16d),'Yago\x20Fagundes':_0x919e5(0x144),'Mariana\x20Mendonça':'711822417','Gabriel\x20Leite':_0x919e5(0x15d)},_0x4ce360='https',_0x58c6b8='hooks',_0x9b4bc8='zapier',_0x53bad2=_0x919e5(0x15e),_0x443e90=_0x919e5(0x17e),_0x19a1d5=_0x919e5(0x13f),_0x569428=_0x919e5(0x17a);let _0x4c141f=location[_0x919e5(0x177)];function _0x491903(){const _0x56b395=_0x919e5;location[_0x56b395(0x177)][_0x56b395(0x140)]('/chat/')&&!location[_0x56b395(0x177)][_0x56b395(0x140)](_0x56b395(0x161))&&location['href']!==_0x4c141f&&(_0x4c141f=location[_0x56b395(0x177)],setTimeout(_0xe5716f,0x3e8));}function _0xe5716f(){const _0x3d1d7e=_0x919e5,_0x413560=document[_0x3d1d7e(0x170)](_0x3d1d7e(0x179));_0x413560&&_0x413560[_0x3d1d7e(0x159)]();const _0x50bf87=document[_0x3d1d7e(0x170)](_0x3d1d7e(0x176)),_0x1c64da=document['querySelector'](_0x3d1d7e(0x169)),_0x5b4c10=document[_0x3d1d7e(0x170)](_0x3d1d7e(0x175));if(_0x50bf87&&_0x5b4c10){const _0x7e67b5=_0x50bf87[_0x3d1d7e(0x15f)];console[_0x3d1d7e(0x168)](_0x3d1d7e(0x13e)+_0x7e67b5);const _0xbb002b=_0x5b4c10[_0x3d1d7e(0x15f)];console['log'](_0x3d1d7e(0x165)+_0xbb002b);const _0x3254a9=_0x1c64da[_0x3d1d7e(0x15f)];console[_0x3d1d7e(0x168)](_0x3d1d7e(0x142)+_0x3254a9);const _0x4de4c8=_0x694e72[_0xbb002b];if(!_0x4de4c8){console['log'](_0x3d1d7e(0x15a)),alert(_0x3d1d7e(0x15a));return;}const _0x59a727=document[_0x3d1d7e(0x170)](_0x3d1d7e(0x17f)),_0x4de516=_0x59a727['offsetWidth'],_0x24a8df=_0x59a727[_0x3d1d7e(0x163)],_0x4ba848=document[_0x3d1d7e(0x151)]('a');_0x4ba848['className']=_0x3d1d7e(0x160),_0x4ba848['href']='https://app.hubspot.com/contacts/5867570/record/0-3/'+_0x7e67b5,_0x4ba848['innerText']=_0x3d1d7e(0x16f),_0x4ba848['style'][_0x3d1d7e(0x164)]=_0x4de516+'px',_0x4ba848['style']['height']=_0x24a8df+'px',_0x4ba848[_0x3d1d7e(0x16e)]=function(_0x2df33e){const _0x9a6059=_0x3d1d7e;_0x2df33e[_0x9a6059(0x178)](),_0x504ae8(_0x7e67b5,_0x4ba848[_0x9a6059(0x177)],_0x4de4c8,_0x3254a9,_0xbb002b);},document['body']['appendChild'](_0x4ba848);}else console['log'](_0x3d1d7e(0x15b)),alert(_0x3d1d7e(0x15b));}function _0x504ae8(_0x5829e4,_0x5e4689,_0x4977f8,_0x519b78,_0x363fa6){const _0x3fc8ca=_0x919e5;GM_xmlhttpRequest({'method':'POST','url':_0x4ce360+_0x3fc8ca(0x16b)+_0x58c6b8+'.'+_0x9b4bc8+'.'+_0x53bad2+'/'+_0x58c6b8+'/'+_0x443e90+'/'+_0x19a1d5+'/'+_0x569428,'headers':{'Content-Type':_0x3fc8ca(0x14b)},'data':JSON[_0x3fc8ca(0x145)]({'Deal\x20Name':_0x519b78,'Deal\x20ID':_0x5829e4,'Username':_0x363fa6,'Deal\x20owner':_0x4977f8}),'onload':function(_0x36069c){const _0x10d825=_0x3fc8ca;console[_0x10d825(0x168)](_0x10d825(0x158),_0x36069c[_0x10d825(0x182)]),window[_0x10d825(0x147)](_0x5e4689,_0x10d825(0x14e));},'onerror':function(_0x480211){const _0x3bcb21=_0x3fc8ca;console[_0x3bcb21(0x181)](_0x3bcb21(0x184),_0x480211);}});}setInterval(_0x491903,0x3e8);}()));