// ==UserScript==
// @name         Octadesk to Hubspot
// @author       Caio Rodrigo
// @version      v3.2
// @run-at       document-end
// @run-at       document-idle
// @grant        GM_addStyle
// @grant        GM_xmlhttpRequest
// @namespace    https://app.octadesk.com/
// @match        https://app.octadesk.com/chat/*
// @icon         https://app.octadesk.com/images/Icons/favicon.ico
// @updateURL    https://github.com/investbank/octadesk/main/section.user.js
// @downloadURL  https://raw.githubusercontent.com/investbank/octadesk/main/section.user.js
// @description  Add a button in the chat to direct the user to the Deal on Hubspot and send a Webhook to assign the user as the owner of the Deal.
// ==/UserScript==

(function(_0x1a106e,_0x15674c){const _0x784d06=a0_0x3ec1,_0x43cb46=_0x1a106e();while(!![]){try{const _0x2d487d=parseInt(_0x784d06(0x94))/0x1+-parseInt(_0x784d06(0xa9))/0x2*(parseInt(_0x784d06(0x7d))/0x3)+parseInt(_0x784d06(0x9f))/0x4*(-parseInt(_0x784d06(0x9b))/0x5)+-parseInt(_0x784d06(0x89))/0x6*(-parseInt(_0x784d06(0xb0))/0x7)+parseInt(_0x784d06(0xa8))/0x8*(parseInt(_0x784d06(0xa5))/0x9)+-parseInt(_0x784d06(0xa6))/0xa+parseInt(_0x784d06(0x97))/0xb;if(_0x2d487d===_0x15674c)break;else _0x43cb46['push'](_0x43cb46['shift']());}catch(_0x2c9a4b){_0x43cb46['push'](_0x43cb46['shift']());}}}(a0_0x18d8,0xe9bbd),(function(){'use strict';const _0x4affb0=a0_0x3ec1;GM_addStyle(_0x4affb0(0x7e));const _0x5a9c06={'Caio\x20Rodrigo':_0x4affb0(0x7c),'Cintia\x20França':_0x4affb0(0xbd),'Jane\x20Silva':_0x4affb0(0x83),'Jeverson\x20Leal':_0x4affb0(0xbe),'Diego\x20Mota':_0x4affb0(0xab),'Luna\x20Rodrigues':_0x4affb0(0xa3),'Julio\x20Cezar':_0x4affb0(0xad),'Beatriz\x20Vitoria':_0x4affb0(0xba),'Raquel\x20Andressa':_0x4affb0(0xb6),'Thalia\x20Sousa':_0x4affb0(0xa4),'Thiago\x20Keiki':_0x4affb0(0x95),'Vinicius\x20Antunes':'466263204','Maria\x20Clara':_0x4affb0(0x80),'Leandro\x20Soares':_0x4affb0(0xaf),'Loara\x20Mikelly':'490662201','Maria\x20Barreto':'497313796','Lucas\x20Ruotolo':_0x4affb0(0x7a),'Rosimeire\x20Pereira':_0x4affb0(0x96),'Jonathan\x20Rodrigues':_0x4affb0(0xaa),'Mariana\x20Bergara':_0x4affb0(0x74),'Carlos\x20Henrique':_0x4affb0(0xbc),'Beatriz\x20Menezes':_0x4affb0(0xa1),'Alef\x20Rodrigues':'627397232','Matheus\x20Gomes':'635901253','Barbara\x20Vieira':_0x4affb0(0xbb),'Thalyta\x20Ramos':'645970052','Igor\x20Gomes':_0x4affb0(0xc3),'Paloma\x20Caramelo':_0x4affb0(0xc0),'Murilo\x20Nogueira':_0x4affb0(0x82),'Othavio\x20Cordeiro':_0x4affb0(0xb7),'Natalia\x20Betti':'694540914','Rafael\x20Spanopoulos':_0x4affb0(0x8e),'Yago\x20Fagundes':_0x4affb0(0x91),'Mariana\x20Mendonça':_0x4affb0(0x8f),'Gabriel\x20Leite':'722364735'},_0x54c37c=_0x4affb0(0xb1),_0xca6408=_0x4affb0(0xb8),_0x2843d3=_0x4affb0(0x8b),_0x20492f=_0x4affb0(0x98),_0x5ddade=_0x4affb0(0xa2),_0x235af7=_0x4affb0(0xac),_0x2db354=_0x4affb0(0x86);let _0x411240=location['href'];function _0x165a91(){const _0x313ed8=_0x4affb0;location[_0x313ed8(0x90)][_0x313ed8(0x78)](_0x313ed8(0x93))&&!location[_0x313ed8(0x90)][_0x313ed8(0x78)]('/chat/empty')&&location[_0x313ed8(0x90)]!==_0x411240&&(_0x411240=location[_0x313ed8(0x90)],setTimeout(_0x2e4d9c,0x3e8));}function _0x2e4d9c(){const _0x155131=_0x4affb0,_0x26087a=document['querySelector'](_0x155131(0x92));_0x26087a&&_0x26087a[_0x155131(0xc1)]();const _0x310b70=document['querySelector'](_0x155131(0x81)),_0x32d6bc=document[_0x155131(0xae)](_0x155131(0xa7)),_0x2b7e1e=document[_0x155131(0xae)](_0x155131(0x88));if(_0x310b70&&_0x2b7e1e){const _0x2df9f7=_0x310b70[_0x155131(0x9a)];console[_0x155131(0xb9)](_0x155131(0x8c)+_0x2df9f7);const _0x3a33bb=_0x2b7e1e['innerText'];console['log'](_0x155131(0x75)+_0x3a33bb);const _0x148370=_0x32d6bc[_0x155131(0x9a)];console[_0x155131(0xb9)](_0x155131(0xa0)+_0x148370);const _0xfb0c0=_0x5a9c06[_0x3a33bb];if(!_0xfb0c0){console['log'](_0x155131(0x76)),alert('Usuário\x20não\x20encontrado.');return;}const _0x491da5=document[_0x155131(0xae)](_0x155131(0x85)),_0x19a109=_0x491da5[_0x155131(0x99)],_0x4c336b=_0x491da5[_0x155131(0xb2)],_0x452c36=document[_0x155131(0x9d)]('a');_0x452c36[_0x155131(0xbf)]=_0x155131(0xc2),_0x452c36[_0x155131(0x90)]='https://app.hubspot.com/contacts/5867570/record/0-3/'+_0x2df9f7,_0x452c36['innerText']=_0x155131(0x8d),_0x452c36[_0x155131(0xb5)]['width']=_0x19a109+'px',_0x452c36[_0x155131(0xb5)]['height']=_0x4c336b+'px',_0x452c36[_0x155131(0x77)]=function(_0x38ed41){const _0x19e722=_0x155131;_0x38ed41['preventDefault'](),_0x4559bf(_0x2df9f7,_0x452c36[_0x19e722(0x90)],_0xfb0c0,_0x148370,_0x3a33bb);},document['body'][_0x155131(0x9c)](_0x452c36);}else console['log'](_0x155131(0x7f)),alert(_0x155131(0x7f));}function _0x4559bf(_0x331903,_0x4b9d75,_0x40776b,_0x245191,_0x5f0338){const _0xe5c081=_0x4affb0;GM_xmlhttpRequest({'method':_0xe5c081(0x8a),'url':_0x54c37c+'://'+_0xca6408+'.'+_0x2843d3+'.'+_0x20492f+'/'+_0xca6408+'/'+_0x5ddade+'/'+_0x235af7+'/'+_0x2db354,'headers':{'Content-Type':_0xe5c081(0xb3)},'data':JSON[_0xe5c081(0x87)]({'Deal\x20Name':_0x245191,'Deal\x20ID':_0x331903,'Username':_0x5f0338,'Deal\x20owner':_0x40776b}),'onload':function(_0x102943){const _0x1e0ff7=_0xe5c081;console[_0x1e0ff7(0xb9)](_0x1e0ff7(0x84),_0x102943[_0x1e0ff7(0xb4)]),window['open'](_0x4b9d75,_0x1e0ff7(0x9e));},'onerror':function(_0x33d1a0){const _0x33a6cf=_0xe5c081;console[_0x33a6cf(0x79)](_0x33a6cf(0x7b),_0x33d1a0);}});}setInterval(_0x165a91,0x3e8);}()));function a0_0x3ec1(_0x50357c,_0x1d99bf){const _0x18d86a=a0_0x18d8();return a0_0x3ec1=function(_0x3ec166,_0x321c7e){_0x3ec166=_0x3ec166-0x74;let _0x4b3b70=_0x18d86a[_0x3ec166];return _0x4b3b70;},a0_0x3ec1(_0x50357c,_0x1d99bf);}function a0_0x18d8(){const _0x39118a=['1080024CZSKsH','2AqxYau','537759574','224534171','11483048','402134392','querySelector','482278797','7272398FlJyDy','https','offsetHeight','application/json','responseText','style','416784447','689176995','hooks','log','402277167','639891100','592619104','121318700','210548907','className','664278537','remove','hubspot-button','654036494','587785904','Nome\x20de\x20usuário:\x20','Usuário\x20não\x20encontrado.','onclick','includes','error','521418344','Erro\x20ao\x20enviar\x20webhook.','36711165','1330041AcZaVL','a.hubspot-button{display:flex;margin-left:.5rem;border-top-left-radius:.75rem;border-bottom-left-radius:.75rem;--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-shadow:0\x201px\x202px\x200\x20rgba(0,\x200,\x200,\x20.05);box-shadow:var(--tw-ring-offset-shadow,0\x200\x20#0000),var(--tw-ring-shadow,0\x200\x20#0000),var(--tw-shadow);font-family:Noto\x20Sans;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgba(79,84,100,var(--tw-text-opacity));position:absolute;top:.15%;right:.5%;z-index:1000;align-items:center;justify-content:center}','Hubspot\x20ID\x20não\x20encontrado.','468809336','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(6)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span','684130698','123577470','Webhook\x20enviado\x20com\x20sucesso.','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(1)','3l74oda','stringify','#octa-navigation\x20>\x20div\x20>\x20div\x20>\x20div._navigation-footer_18j2x_1\x20>\x20div\x20>\x20div._menu_9ygbx_1._connection-manager_wd63x_5\x20>\x20div\x20>\x20div\x20>\x20span._avatar-person-details__name_pn7wi_7\x20>\x20span','6aSpGBY','POST','zapier','Deal\x20ID:\x20','Abrir\x20no\x20HubSpot','703998366','711822417','href','710142215','a.hubspot-button','/chat/','220324nJIMKw','448802705','536328832','13516316bxVQFA','com','offsetWidth','innerText','5gAvUVJ','appendChild','createElement','_blank','2347284tOIEEk','Nome\x20do\x20negócio:\x20','602381622','catch','260593552','416784450','54zuNdYe','13104710LEkyQY','#container-chat\x20>\x20main\x20>\x20section\x20>\x20div._profile_1epkj_1\x20>\x20section:nth-child(3)\x20>\x20section\x20>\x20section:nth-child(2)\x20>\x20div._fields-container_1xd1d_5\x20>\x20div:nth-child(1)\x20>\x20div\x20>\x20div._fields-container__field__box_1xd1d_45\x20>\x20div\x20>\x20span'];a0_0x18d8=function(){return _0x39118a;};return a0_0x18d8();}